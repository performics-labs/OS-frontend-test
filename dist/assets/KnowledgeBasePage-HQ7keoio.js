import{a3 as L,a as ie,A as se,c3 as Hn,c4 as zn,c5 as we,c6 as Bn,a1 as f,c7 as J,j as a,c8 as Un,b8 as Kr,c9 as Rt,ca as qn,cb as wt,bk as Q,cc as Vn,cd as Kn,bf as It,ce as Wn,cf as Gn,cg as Yn,ch as Xn,ci as Qn,cj as Zn,ck as Jn,cl as ei,cm as ti,cn as ri,co as ni,cp as ii,by as Wr,B as A,V as Z,bz as si,t as oi,bd as ai,i as ge,d as ke,h as Qe,e as At,f as Mt,cq as te,I as Te,b7 as li,S as Lt,n as $t,o as Ft,p as Ht,q as zt,_ as Ze,au as ui,cr as ci,k as di,m as fi,aT as Bt,aU as Ut,aV as qt,aW as Vt,aX as Kt,aY as Wt,aZ as Gt,a_ as Yt,D as hi,x as gi,y as pi,z as vi,E as mi,av as $}from"./index-0i5ZKW7Y.js";import{f as yi}from"./formatDistanceToNow-CyBebV8n.js";function Gr(t){if(!t)return"";const e=/^---\s*\n(.*?)\n---\s*\n/s,r=t.match(e);return r?t.slice(r[0].length):t}function bi(t){if(!t)return null;const e=/^---\s*\n(.*?)\n---\s*\n/s,r=t.match(e);return r?r[1]:null}function Si(t,e){if(!e)return t;const r=Gr(t);return`---
${e}
---
${r}`}const xi=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Di=L("bold",xi);const Oi=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wi=L("calendar",Oi);const Ii=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Xt=L("code",Ii);const Ti=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Ci=L("folder-plus",Ti);const _i=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],Ei=L("folder-tree",_i);const Ni=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ji=L("folder",Ni);const ki=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Pi=L("grip-vertical",ki);const Ri=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Ai=L("italic",Ri);const Mi=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Li=L("list-ordered",Mi);const $i=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Fi=L("list",$i);const Hi=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],zi=L("quote",Hi);const Bi=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Ui=L("redo",Bi);const qi=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vi=L("save",qi);const Ki=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Wi=L("table",Ki);const Gi=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Yi=L("tag",Gi);const Xi=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Qi=L("undo",Xi);async function Ce(t){const e=await ie.get(se.KB_DOC(t));return we.parse(e.data.document)}async function Zi(t){const e=Bn.parse(t),r=await ie.post(se.KB_DOCS,e);return we.parse(r.data.document)}async function Je(t,e){const r=zn.parse(e),n=await ie.put(se.KB_DOC(t),r);return we.parse(n.data.document)}async function Ji(t,e){const r=await ie.post(se.KB_DOC_PUBLISH(t),e);return we.parse(r.data.document)}async function es(t,e){const r=await ie.post(se.KB_DOC_UNPUBLISH(t),e);return we.parse(r.data.document)}async function Qt(t){await ie.delete(se.KB_DOC(t))}async function Zt(t){const e={};t.category&&(e.category=t.category),t.status&&(e.status=t.status),t.includeDrafts!==void 0&&(e.include_drafts=String(t.includeDrafts));const r=await ie.get(se.KB_DOCS_TREE,{params:e});return Hn.parse(r.data)}const Yr=f.createContext(null);function H(){const t=f.useContext(Yr);if(t===null)throw new Error("No Tree Api Provided");return t}const Xr=f.createContext(null);function ts(){const t=f.useContext(Xr);if(t===null)throw new Error("Provide a NodesContext");return t}const Qr=f.createContext(null);function rs(){const t=f.useContext(Qr);if(t===null)throw new Error("Provide a DnDContext");return t}const Zr=f.createContext(0);function Jr(){f.useContext(Zr)}function Pe(t,e,r){return Math.max(Math.min(t,r),e)}function en(t){return t&&t.isLeaf}function tn(t){return t&&t.isInternal&&!t.isOpen}function rn(t){var e;return t&&t.isOpen&&!(!((e=t.children)===null||e===void 0)&&e.length)}const nn=(t,e)=>{let r=t;for(;r;){if(r.id===e.id)return!0;r=r.parent}return!1},sn=t=>{if(!t.parent)throw Error("Node does not have a parent");return t.parent.children.findIndex(e=>e.id===t.id)};function ns(){}function Tt(t,e){if(!t)return null;if(t.id===e)return t;if(t.children)for(let r of t.children){const n=Tt(r,e);if(n)return n}return null}function Fe(t,e){if(e(t),t.children)for(let r of t.children)Fe(r,e)}function on(t){const e=ln(t);let r;for(let n=0;n<e.length;++n)if(e[n]===t){r=is(e,n);break}r?.focus()}function an(t){const e=ln(t);let r;for(let n=0;n<e.length;++n)if(e[n]===t){r=ss(e,n);break}r?.focus()}function is(t,e){return e+1<t.length?t[e+1]:t[0]}function ss(t,e){return e-1>=0?t[e-1]:t[t.length-1]}function ln(t){return Array.from(document.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)')).filter(e=>e===t||!t.contains(e))}function xe(t,e){return typeof e=="boolean"?e:typeof e=="string"?t[e]:e(t)}function un(t){return t===null?null:re(t)}function re(t){return typeof t=="string"?t:t.id}function os(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}function cn(t,...e){if(t)return t(...e)}function dn(t){return new Promise((e,r)=>{let n=0;function i(){n+=1,n===100&&r(),t()?e():setTimeout(i,10)}i()})}function fn(t){var e,r;const n=t.focusedNode;return n?n.isOpen?0:n.parent?n.childIndex+1:0:(r=(e=t.root.children)===null||e===void 0?void 0:e.length)!==null&&r!==void 0?r:0}function hn(t){const e=t.focusedNode;return e?e.isOpen?e.id:e.parent&&!e.parent.isRoot?e.parent.id:null:null}const as=Object.freeze(Object.defineProperty({__proto__:null,access:xe,bound:Pe,dfs:Tt,focusNextElement:on,focusPrevElement:an,getInsertIndex:fn,getInsertParentId:hn,identify:re,identifyNull:un,indexOf:sn,isClosed:tn,isDescendant:nn,isItem:en,isOpenWithEmptyChildren:rn,mergeRefs:os,noop:ns,safeRun:cn,waitFor:dn,walk:Fe},Symbol.toStringTag,{value:"Module"})),ls={display:"flex",alignItems:"center",zIndex:1},us={flex:1,height:"2px",background:"#4B91E2",borderRadius:"1px"},cs={width:"4px",height:"4px",boxShadow:"0 0 0 3px #4B91E2",borderRadius:"50%"},ds=J.memo(function({top:e,left:r,indent:n}){const i={position:"absolute",pointerEvents:"none",top:e-2+"px",left:r+"px",right:n+"px"};return a.jsxs("div",{style:Object.assign(Object.assign({},ls),i),children:[a.jsx("div",{style:Object.assign({},cs)}),a.jsx("div",{style:Object.assign({},us)})]})});function fs({node:t,attrs:e,innerRef:r,children:n}){return a.jsx("div",Object.assign({},e,{ref:r,onFocus:i=>i.stopPropagation(),onClick:t.handleClick,children:n}))}function hs(t){return a.jsxs("div",{ref:t.dragHandle,style:t.style,children:[a.jsx("span",{onClick:e=>{e.stopPropagation(),t.node.toggle()},children:t.node.isLeaf?"ðŸŒ³":t.node.isOpen?"ðŸ—":"ðŸ—€"})," ",t.node.isEditing?a.jsx(ps,Object.assign({},t)):a.jsx(gs,Object.assign({},t))]})}function gs(t){return a.jsx(a.Fragment,{children:a.jsx("span",{children:t.node.data.name})})}function ps({node:t}){const e=f.useRef();return f.useEffect(()=>{var r,n;(r=e.current)===null||r===void 0||r.focus(),(n=e.current)===null||n===void 0||n.select()},[]),a.jsx("input",{ref:e,defaultValue:t.data.name,onBlur:()=>t.reset(),onKeyDown:r=>{var n;r.key==="Escape"&&t.reset(),r.key==="Enter"&&t.submit(((n=e.current)===null||n===void 0?void 0:n.value)||"")}})}function et(t){return{type:"EDIT",id:t}}function vs(t={id:null},e){return e.type==="EDIT"?Object.assign(Object.assign({},t),{id:e.id}):t}function ue(t){return{type:"FOCUS",id:t}}function ms(){return{type:"TREE_BLUR"}}function ys(t={id:null,treeFocused:!1},e){return e.type==="FOCUS"?Object.assign(Object.assign({},t),{id:e.id,treeFocused:!0}):e.type==="TREE_BLUR"?Object.assign(Object.assign({},t),{treeFocused:!1}):t}class He{constructor(e){this.handleClick=r=>{r.metaKey&&!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():r.shiftKey&&!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=e.tree,this.id=e.id,this.data=e.data,this.level=e.level,this.children=e.children,this.parent=e.parent,this.isDraggable=e.isDraggable,this.rowIndex=e.rowIndex}get isRoot(){return this.id===Oe}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return this.isLeaf?!1:this.tree.isOpen(this.id)}get isClosed(){return this.isLeaf?!1:!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&&this.tree.hasOneSelection}get isSelectedStart(){var e;return this.isSelected&&!(!((e=this.prev)===null||e===void 0)&&e.isSelected)}get isSelectedEnd(){var e;return this.isSelected&&!(!((e=this.next)===null||e===void 0)&&e.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&&this.parent.children?this.parent.children.findIndex(e=>e.id===this.id):-1}get next(){return this.rowIndex===null?null:this.tree.at(this.rowIndex+1)}get prev(){return this.rowIndex===null?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var e,r;const n=this.childIndex;return(r=(e=this.parent)===null||e===void 0?void 0:e.children[n+1])!==null&&r!==void 0?r:null}isAncestorOf(e){if(!e)return!1;let r=e;for(;r;){if(r.id===this.id)return!0;r=r.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(e){this.tree.submit(this,e)}reset(){this.tree.reset()}clone(){return new He(Object.assign({},this))}edit(){return this.tree.edit(this)}}const Oe="__REACT_ARBORIST_INTERNAL_ROOT__";function Jt(t){var e;function r(s,o,l){const u=t.accessId(s),c=new He({tree:t,data:s,level:o,parent:l,id:u,children:null,isDraggable:t.isDraggable(s),rowIndex:null}),h=t.accessChildren(s);return h&&(c.children=h.map(y=>r(y,o+1,c))),c}const n=new He({tree:t,id:Oe,data:{id:Oe},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),i=(e=t.props.data)!==null&&e!==void 0?e:[];return n.children=i.map(s=>r(s,0,n)),n}const pt={open(t,e){return{type:"VISIBILITY_OPEN",id:t,filtered:e}},close(t,e){return{type:"VISIBILITY_CLOSE",id:t,filtered:e}},toggle(t,e){return{type:"VISIBILITY_TOGGLE",id:t,filtered:e}},clear(t){return{type:"VISIBILITY_CLEAR",filtered:t}}};function er(t={},e){if(e.type==="VISIBILITY_OPEN")return Object.assign(Object.assign({},t),{[e.id]:!0});if(e.type==="VISIBILITY_CLOSE")return Object.assign(Object.assign({},t),{[e.id]:!1});if(e.type==="VISIBILITY_TOGGLE"){const r=t[e.id];return Object.assign(Object.assign({},t),{[e.id]:!r})}else return e.type==="VISIBILITY_CLEAR"?{}:t}function bs(t={filtered:{},unfiltered:{}},e){return e.type.startsWith("VISIBILITY")?e.filtered?Object.assign(Object.assign({},t),{filtered:er(t.filtered,e)}):Object.assign(Object.assign({},t),{unfiltered:er(t.unfiltered,e)}):t}const pe=t=>{var e;return{nodes:{open:{filtered:{},unfiltered:(e=t?.initialOpenState)!==null&&e!==void 0?e:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:"none"},dragId:null,dragIds:[],parentId:null,index:-1}}},K={clear:()=>({type:"SELECTION_CLEAR"}),only:t=>({type:"SELECTION_ONLY",id:re(t)}),add:t=>({type:"SELECTION_ADD",ids:(Array.isArray(t)?t:[t]).map(re)}),remove:t=>({type:"SELECTION_REMOVE",ids:(Array.isArray(t)?t:[t]).map(re)}),set:t=>Object.assign({type:"SELECTION_SET"},t),mostRecent:t=>({type:"SELECTION_MOST_RECENT",id:t===null?null:re(t)}),anchor:t=>({type:"SELECTION_ANCHOR",id:t===null?null:re(t)})};function Ss(t=pe().nodes.selection,e){const r=t.ids;switch(e.type){case"SELECTION_CLEAR":return Object.assign(Object.assign({},t),{ids:new Set});case"SELECTION_ONLY":return Object.assign(Object.assign({},t),{ids:new Set([e.id])});case"SELECTION_ADD":return e.ids.length===0?t:(e.ids.forEach(n=>r.add(n)),Object.assign(Object.assign({},t),{ids:new Set(r)}));case"SELECTION_REMOVE":return e.ids.length===0?t:(e.ids.forEach(n=>r.delete(n)),Object.assign(Object.assign({},t),{ids:new Set(r)}));case"SELECTION_SET":return Object.assign(Object.assign({},t),{ids:e.ids,mostRecent:e.mostRecent,anchor:e.anchor});case"SELECTION_MOST_RECENT":return Object.assign(Object.assign({},t),{mostRecent:e.id});case"SELECTION_ANCHOR":return Object.assign(Object.assign({},t),{anchor:e.id});default:return t}}const ve={cursor(t){return{type:"DND_CURSOR",cursor:t}},dragStart(t,e){return{type:"DND_DRAG_START",id:t,dragIds:e}},dragEnd(){return{type:"DND_DRAG_END"}},hovering(t,e){return{type:"DND_HOVERING",parentId:t,index:e}}};function xs(t=pe().dnd,e){switch(e.type){case"DND_CURSOR":return Object.assign(Object.assign({},t),{cursor:e.cursor});case"DND_DRAG_START":return Object.assign(Object.assign({},t),{dragId:e.id,dragIds:e.dragIds});case"DND_DRAG_END":return pe().dnd;case"DND_HOVERING":return Object.assign(Object.assign({},t),{parentId:e.parentId,index:e.index});default:return t}}const Ds={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},Os=t=>{if(!t)return{display:"none"};const{x:e,y:r}=t;return{transform:`translate(${e}px, ${r}px)`}},ws=t=>{if(!t)return{display:"none"};const{x:e,y:r}=t;return{transform:`translate(${e+10}px, ${r+10}px)`}};function gn({offset:t,mouse:e,id:r,dragIds:n,isDragging:i}){return a.jsxs(Is,{isDragging:i,children:[a.jsx(Ts,{offset:t,children:a.jsx(_s,{id:r,dragIds:n})}),a.jsx(Cs,{mouse:e,count:n.length})]})}const Is=f.memo(function(e){return e.isDragging?a.jsx("div",{style:Ds,children:e.children}):null});function Ts(t){return a.jsx("div",{className:"row preview",style:Os(t.offset),children:t.children})}function Cs(t){const{count:e,mouse:r}=t;return e>1?a.jsx("div",{className:"selected-count",style:ws(r),children:e}):null}const _s=f.memo(function(e){const r=H(),n=r.get(e.id);return n?a.jsx(r.renderNode,{preview:!0,node:n,style:{paddingLeft:n.level*r.indent,opacity:.2,background:"transparent"},tree:r}):null});function tr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},vt(t,e)}function Es(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,vt(t,e)}var rr=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ns(t,e){return!!(t===e||rr(t)&&rr(e))}function js(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Ns(t[r],e[r]))return!1;return!0}function tt(t,e){e===void 0&&(e=js);var r,n=[],i,s=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return s&&r===this&&e(l,n)||(i=t.apply(this,l),s=!0,r=this,n=l),i}return o}var ks=typeof performance=="object"&&typeof performance.now=="function",nr=ks?function(){return performance.now()}:function(){return Date.now()};function ir(t){cancelAnimationFrame(t.id)}function Ps(t,e){var r=nr();function n(){nr()-r>=e?t.call(null):i.id=requestAnimationFrame(n)}var i={id:requestAnimationFrame(n)};return i}var rt=-1;function sr(t){if(t===void 0&&(t=!1),rt===-1||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(e),rt=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return rt}var ce=null;function or(t){if(t===void 0&&(t=!1),ce===null||t){var e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?ce="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?ce="negative":ce="positive-ascending"),document.body.removeChild(e),ce}return ce}var Rs=150,As=function(e,r){return e};function Ms(t){var e,r=t.getItemOffset,n=t.getEstimatedTotalSize,i=t.getItemSize,s=t.getOffsetForIndexAndAlignment,o=t.getStartIndexForOffset,l=t.getStopIndexForStartIndex,u=t.initInstanceProps,c=t.shouldResetStyleCacheOnItemSizeChange,h=t.validateProps;return e=(function(y){Es(w,y);function w(x){var d;return d=y.call(this,x)||this,d._instanceProps=u(d.props,tr(d)),d._outerRef=void 0,d._resetIsScrollingTimeoutId=null,d.state={instance:tr(d),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof d.props.initialScrollOffset=="number"?d.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},d._callOnItemsRendered=void 0,d._callOnItemsRendered=tt(function(g,v,m,S){return d.props.onItemsRendered({overscanStartIndex:g,overscanStopIndex:v,visibleStartIndex:m,visibleStopIndex:S})}),d._callOnScroll=void 0,d._callOnScroll=tt(function(g,v,m){return d.props.onScroll({scrollDirection:g,scrollOffset:v,scrollUpdateWasRequested:m})}),d._getItemStyle=void 0,d._getItemStyle=function(g){var v=d.props,m=v.direction,S=v.itemSize,T=v.layout,I=d._getItemStyleCache(c&&S,c&&T,c&&m),D;if(I.hasOwnProperty(g))D=I[g];else{var N=r(d.props,g,d._instanceProps),j=i(d.props,g,d._instanceProps),P=m==="horizontal"||T==="horizontal",G=m==="rtl",z=P?N:0;I[g]=D={position:"absolute",left:G?void 0:z,right:G?z:void 0,top:P?0:N,height:P?"100%":j,width:P?j:"100%"}}return D},d._getItemStyleCache=void 0,d._getItemStyleCache=tt(function(g,v,m){return{}}),d._onScrollHorizontal=function(g){var v=g.currentTarget,m=v.clientWidth,S=v.scrollLeft,T=v.scrollWidth;d.setState(function(I){if(I.scrollOffset===S)return null;var D=d.props.direction,N=S;if(D==="rtl")switch(or()){case"negative":N=-S;break;case"positive-descending":N=T-m-S;break}return N=Math.max(0,Math.min(N,T-m)),{isScrolling:!0,scrollDirection:I.scrollOffset<N?"forward":"backward",scrollOffset:N,scrollUpdateWasRequested:!1}},d._resetIsScrollingDebounced)},d._onScrollVertical=function(g){var v=g.currentTarget,m=v.clientHeight,S=v.scrollHeight,T=v.scrollTop;d.setState(function(I){if(I.scrollOffset===T)return null;var D=Math.max(0,Math.min(T,S-m));return{isScrolling:!0,scrollDirection:I.scrollOffset<D?"forward":"backward",scrollOffset:D,scrollUpdateWasRequested:!1}},d._resetIsScrollingDebounced)},d._outerRefSetter=function(g){var v=d.props.outerRef;d._outerRef=g,typeof v=="function"?v(g):v!=null&&typeof v=="object"&&v.hasOwnProperty("current")&&(v.current=g)},d._resetIsScrollingDebounced=function(){d._resetIsScrollingTimeoutId!==null&&ir(d._resetIsScrollingTimeoutId),d._resetIsScrollingTimeoutId=Ps(d._resetIsScrolling,Rs)},d._resetIsScrolling=function(){d._resetIsScrollingTimeoutId=null,d.setState({isScrolling:!1},function(){d._getItemStyleCache(-1,null)})},d}w.getDerivedStateFromProps=function(d,g){return Ls(d,g),h(d),null};var C=w.prototype;return C.scrollTo=function(d){d=Math.max(0,d),this.setState(function(g){return g.scrollOffset===d?null:{scrollDirection:g.scrollOffset<d?"forward":"backward",scrollOffset:d,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},C.scrollToItem=function(d,g){g===void 0&&(g="auto");var v=this.props,m=v.itemCount,S=v.layout,T=this.state.scrollOffset;d=Math.max(0,Math.min(d,m-1));var I=0;if(this._outerRef){var D=this._outerRef;S==="vertical"?I=D.scrollWidth>D.clientWidth?sr():0:I=D.scrollHeight>D.clientHeight?sr():0}this.scrollTo(s(this.props,d,g,T,this._instanceProps,I))},C.componentDidMount=function(){var d=this.props,g=d.direction,v=d.initialScrollOffset,m=d.layout;if(typeof v=="number"&&this._outerRef!=null){var S=this._outerRef;g==="horizontal"||m==="horizontal"?S.scrollLeft=v:S.scrollTop=v}this._callPropsCallbacks()},C.componentDidUpdate=function(){var d=this.props,g=d.direction,v=d.layout,m=this.state,S=m.scrollOffset,T=m.scrollUpdateWasRequested;if(T&&this._outerRef!=null){var I=this._outerRef;if(g==="horizontal"||v==="horizontal")if(g==="rtl")switch(or()){case"negative":I.scrollLeft=-S;break;case"positive-ascending":I.scrollLeft=S;break;default:var D=I.clientWidth,N=I.scrollWidth;I.scrollLeft=N-D-S;break}else I.scrollLeft=S;else I.scrollTop=S}this._callPropsCallbacks()},C.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&ir(this._resetIsScrollingTimeoutId)},C.render=function(){var d=this.props,g=d.children,v=d.className,m=d.direction,S=d.height,T=d.innerRef,I=d.innerElementType,D=d.innerTagName,N=d.itemCount,j=d.itemData,P=d.itemKey,G=P===void 0?As:P,z=d.layout,ae=d.outerElementType,le=d.outerTagName,ee=d.style,me=d.useIsScrolling,ye=d.width,b=this.state.isScrolling,F=m==="horizontal"||z==="horizontal",We=F?this._onScrollHorizontal:this._onScrollVertical,Ie=this._getRangeToRender(),Ge=Ie[0],Ye=Ie[1],p=[];if(N>0)for(var E=Ge;E<=Ye;E++)p.push(f.createElement(g,{data:j,key:G(E,j),index:E,isScrolling:me?b:void 0,style:this._getItemStyle(E)}));var k=n(this.props,this._instanceProps);return f.createElement(ae||le||"div",{className:v,onScroll:We,ref:this._outerRefSetter,style:Un({position:"relative",height:S,width:ye,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:m},ee)},f.createElement(I||D||"div",{children:p,ref:T,style:{height:F?"100%":k,pointerEvents:b?"none":void 0,width:F?k:"100%"}}))},C._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var d=this.props.itemCount;if(d>0){var g=this._getRangeToRender(),v=g[0],m=g[1],S=g[2],T=g[3];this._callOnItemsRendered(v,m,S,T)}}if(typeof this.props.onScroll=="function"){var I=this.state,D=I.scrollDirection,N=I.scrollOffset,j=I.scrollUpdateWasRequested;this._callOnScroll(D,N,j)}},C._getRangeToRender=function(){var d=this.props,g=d.itemCount,v=d.overscanCount,m=this.state,S=m.isScrolling,T=m.scrollDirection,I=m.scrollOffset;if(g===0)return[0,0,0,0];var D=o(this.props,I,this._instanceProps),N=l(this.props,D,I,this._instanceProps),j=!S||T==="backward"?Math.max(1,v):1,P=!S||T==="forward"?Math.max(1,v):1;return[Math.max(0,D-j),Math.max(0,Math.min(g-1,N+P)),D,N]},w})(f.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var Ls=function(e,r){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,r.instance},$s=Ms({getItemOffset:function(e,r){var n=e.itemSize;return r*n},getItemSize:function(e,r){var n=e.itemSize;return n},getEstimatedTotalSize:function(e){var r=e.itemCount,n=e.itemSize;return n*r},getOffsetForIndexAndAlignment:function(e,r,n,i,s,o){var l=e.direction,u=e.height,c=e.itemCount,h=e.itemSize,y=e.layout,w=e.width,C=l==="horizontal"||y==="horizontal",x=C?w:u,d=Math.max(0,c*h-x),g=Math.min(d,r*h),v=Math.max(0,r*h-x+h+o);switch(n==="smart"&&(i>=v-x&&i<=g+x?n="auto":n="center"),n){case"start":return g;case"end":return v;case"center":{var m=Math.round(v+(g-v)/2);return m<Math.ceil(x/2)?0:m>d+Math.floor(x/2)?d:m}case"auto":default:return i>=v&&i<=g?i:i<v?v:g}},getStartIndexForOffset:function(e,r){var n=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/i)))},getStopIndexForStartIndex:function(e,r,n){var i=e.direction,s=e.height,o=e.itemCount,l=e.itemSize,u=e.layout,c=e.width,h=i==="horizontal"||u==="horizontal",y=r*l,w=h?c:s,C=Math.ceil((w+n-y)/l);return Math.max(0,Math.min(o-1,r+C-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function Fs(){var t,e;const r=H(),i=rs().cursor;if(!i||i.type!=="line")return null;const s=r.indent,o=r.rowHeight*i.index+((e=(t=r.props.padding)!==null&&t!==void 0?t:r.props.paddingTop)!==null&&e!==void 0?e:0),l=s*i.level,u=r.renderCursor;return a.jsx(u,{top:o,left:l,indent:s})}var Hs=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const zs=f.forwardRef(function(e,r){const{children:n}=e,i=Hs(e,["children"]),s=H();return a.jsxs("div",Object.assign({ref:r},i,{onClick:o=>{o.currentTarget===o.target&&s.deselectAll()},children:[a.jsx(Bs,{}),n]}))}),Bs=()=>{const t=H();return a.jsx("div",{style:{height:t.visibleNodes.length*t.rowHeight,width:"100%",position:"absolute",left:"0",right:"0"},children:a.jsx(Fs,{})})};var Us=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};const qs=f.forwardRef(function(e,r){var n,i,s,o,{style:l}=e,u=Us(e,["style"]);const c=H(),h=(i=(n=c.props.padding)!==null&&n!==void 0?n:c.props.paddingTop)!==null&&i!==void 0?i:0,y=(o=(s=c.props.padding)!==null&&s!==void 0?s:c.props.paddingBottom)!==null&&o!==void 0?o:0;return a.jsx("div",Object.assign({ref:r,style:Object.assign(Object.assign({},l),{height:`${parseFloat(l.height)+h+y}px`})},u))});var pn=f.createContext({dragDropManager:void 0}),V;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(V||(V={}));function O(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(!t){var s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;s=new Error(e.replace(/%s/g,function(){return n[o++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}var Ct="dnd-core/INIT_COORDS",Be="dnd-core/BEGIN_DRAG",_t="dnd-core/PUBLISH_DRAG_SOURCE",Ue="dnd-core/HOVER",qe="dnd-core/DROP",Ve="dnd-core/END_DRAG";function ar(t,e){return{type:Ct,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}function Re(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Re=function(r){return typeof r}:Re=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Re(t)}function Vs(t,e,r){return e.split(".").reduce(function(n,i){return n&&n[i]?n[i]:r||null},t)}function Ks(t,e){return t.filter(function(r){return r!==e})}function vn(t){return Re(t)==="object"}function Ws(t,e){var r=new Map,n=function(o){r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);var i=[];return r.forEach(function(s,o){s===1&&i.push(o)}),i}function Gs(t,e){return t.filter(function(r){return e.indexOf(r)>-1})}var Ys={type:Ct,payload:{clientOffset:null,sourceClientOffset:null}};function Xs(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},i=n.publishSource,s=i===void 0?!0:i,o=n.clientOffset,l=n.getSourceClientOffset,u=t.getMonitor(),c=t.getRegistry();t.dispatch(ar(o)),Qs(r,u,c);var h=eo(r,u);if(h===null){t.dispatch(Ys);return}var y=null;if(o){if(!l)throw new Error("getSourceClientOffset must be defined");Zs(l),y=l(h)}t.dispatch(ar(o,y));var w=c.getSource(h),C=w.beginDrag(u,h);if(C!=null){Js(C),c.pinSource(h);var x=c.getSourceType(h);return{type:Be,payload:{itemType:x,item:C,sourceId:h,clientOffset:o||null,sourceClientOffset:y||null,isSourcePublic:!!s}}}}}function Qs(t,e,r){O(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){O(r.getSource(n),"Expected sourceIds to be registered.")})}function Zs(t){O(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Js(t){O(vn(t),"Item must be an object.")}function eo(t,e){for(var r=null,n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function to(t){return function(){var r=t.getMonitor();if(r.isDragging())return{type:_t}}}function mt(t,e){return e===null?t===null:Array.isArray(t)?t.some(function(r){return r===e}):t===e}function ro(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.clientOffset;no(r);var s=r.slice(0),o=t.getMonitor(),l=t.getRegistry();io(s,o,l);var u=o.getItemType();return so(s,l,u),oo(s,o,l),{type:Ue,payload:{targetIds:s,clientOffset:i||null}}}}function no(t){O(Array.isArray(t),"Expected targetIds to be an array.")}function io(t,e,r){O(e.isDragging(),"Cannot call hover while not dragging."),O(!e.didDrop(),"Cannot call hover after drop.");for(var n=0;n<t.length;n++){var i=t[n];O(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");var s=r.getTarget(i);O(s,"Expected targetIds to be registered.")}}function so(t,e,r){for(var n=t.length-1;n>=0;n--){var i=t[n],s=e.getTargetType(i);mt(s,r)||t.splice(n,1)}}function oo(t,e,r){t.forEach(function(n){var i=r.getTarget(n);i.hover(e,n)})}function lr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lr(Object(r),!0).forEach(function(n){ao(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ao(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lo(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.getMonitor(),i=t.getRegistry();uo(n);var s=ho(n);s.forEach(function(o,l){var u=co(o,l,i,n),c={type:qe,payload:{dropResult:ur(ur({},r),u)}};t.dispatch(c)})}}function uo(t){O(t.isDragging(),"Cannot call drop while not dragging."),O(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function co(t,e,r,n){var i=r.getTarget(t),s=i?i.drop(n,t):void 0;return fo(s),typeof s>"u"&&(s=e===0?{}:n.getDropResult()),s}function fo(t){O(typeof t>"u"||vn(t),"Drop result must either be an object or undefined.")}function ho(t){var e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function go(t){return function(){var r=t.getMonitor(),n=t.getRegistry();po(r);var i=r.getSourceId();if(i!=null){var s=n.getSource(i,!0);s.endDrag(r,i),n.unpinSource()}return{type:Ve}}}function po(t){O(t.isDragging(),"Cannot call endDrag while not dragging.")}function vo(t){return{beginDrag:Xs(t),publishDragSource:to(t),hover:ro(t),drop:lo(t),endDrag:go(t)}}function mo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bo(t,e,r){return e&&yo(t.prototype,e),t}function be(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var So=(function(){function t(e,r){var n=this;mo(this,t),be(this,"store",void 0),be(this,"monitor",void 0),be(this,"backend",void 0),be(this,"isSetUp",!1),be(this,"handleRefCountChange",function(){var i=n.store.getState().refCount>0;n.backend&&(i&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!i&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}return bo(t,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function i(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var h=o.apply(r,u);typeof h<"u"&&n(h)}}var s=vo(this);return Object.keys(s).reduce(function(o,l){var u=s[l];return o[l]=i(u),o},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),t})();function U(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var cr=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),dr=function(){return Math.random().toString(36).substring(7).split("").join(".")},fr={INIT:"@@redux/INIT"+dr(),REPLACE:"@@redux/REPLACE"+dr()};function xo(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function mn(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(U(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(U(1));return r(mn)(t,e)}if(typeof t!="function")throw new Error(U(2));var i=t,s=e,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function h(){if(u)throw new Error(U(3));return s}function y(d){if(typeof d!="function")throw new Error(U(4));if(u)throw new Error(U(5));var g=!0;return c(),l.push(d),function(){if(g){if(u)throw new Error(U(6));g=!1,c();var m=l.indexOf(d);l.splice(m,1),o=null}}}function w(d){if(!xo(d))throw new Error(U(7));if(typeof d.type>"u")throw new Error(U(8));if(u)throw new Error(U(9));try{u=!0,s=i(s,d)}finally{u=!1}for(var g=o=l,v=0;v<g.length;v++){var m=g[v];m()}return d}function C(d){if(typeof d!="function")throw new Error(U(10));i=d,w({type:fr.REPLACE})}function x(){var d,g=y;return d={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(U(11));function S(){m.next&&m.next(h())}S();var T=g(S);return{unsubscribe:T}}},d[cr]=function(){return this},d}return w({type:fr.INIT}),n={dispatch:w,subscribe:y,getState:h,replaceReducer:C},n[cr]=x,n}var Do=function(e,r){return e===r};function Oo(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function wo(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Do;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function hr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hr(Object(r),!0).forEach(function(n){Io(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Io(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pr={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function To(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pr,e=arguments.length>1?arguments[1]:void 0,r=e.payload;switch(e.type){case Ct:case Be:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Ue:return Oo(t.clientOffset,r.clientOffset)?t:gr(gr({},t),{},{clientOffset:r.clientOffset});case Ve:case qe:return pr;default:return t}}var Et="dnd-core/ADD_SOURCE",Nt="dnd-core/ADD_TARGET",jt="dnd-core/REMOVE_SOURCE",Ke="dnd-core/REMOVE_TARGET";function Co(t){return{type:Et,payload:{sourceId:t}}}function _o(t){return{type:Nt,payload:{targetId:t}}}function Eo(t){return{type:jt,payload:{sourceId:t}}}function No(t){return{type:Ke,payload:{targetId:t}}}function vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vr(Object(r),!0).forEach(function(n){jo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ko={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Po(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ko,e=arguments.length>1?arguments[1]:void 0,r=e.payload;switch(e.type){case Be:return q(q({},t),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case _t:return q(q({},t),{},{isSourcePublic:!0});case Ue:return q(q({},t),{},{targetIds:r.targetIds});case Ke:return t.targetIds.indexOf(r.targetId)===-1?t:q(q({},t),{},{targetIds:Ks(t.targetIds,r.targetId)});case qe:return q(q({},t),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Ve:return q(q({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Ro(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Et:case Nt:return t+1;case jt:case Ke:return t-1;default:return t}}var ze=[],kt=[];ze.__IS_NONE__=!0;kt.__IS_ALL__=!0;function Ao(t,e){if(t===ze)return!1;if(t===kt||typeof e>"u")return!0;var r=Gs(e,t);return r.length>0}function Mo(){var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:break;case Et:case Nt:case Ke:case jt:return ze;case Be:case _t:case Ve:case qe:default:return kt}var e=t.payload,r=e.targetIds,n=r===void 0?[]:r,i=e.prevTargetIds,s=i===void 0?[]:i,o=Ws(n,s),l=o.length>0||!wo(n,s);if(!l)return ze;var u=s[s.length-1],c=n[n.length-1];return u!==c&&(u&&o.push(u),c&&o.push(c)),o}function Lo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function mr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mr(Object(r),!0).forEach(function(n){$o(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Mo(t.dirtyHandlerIds,{type:e.type,payload:yr(yr({},e.payload),{},{prevTargetIds:Vs(t,"dragOperation.targetIds",[])})}),dragOffset:To(t.dragOffset,e),refCount:Ro(t.refCount,e),dragOperation:Po(t.dragOperation,e),stateId:Lo(t.stateId)}}function Ho(t,e){return{x:t.x+e.x,y:t.y+e.y}}function yn(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zo(t){var e=t.clientOffset,r=t.initialClientOffset,n=t.initialSourceClientOffset;return!e||!r||!n?null:yn(Ho(e,n),r)}function Bo(t){var e=t.clientOffset,r=t.initialClientOffset;return!e||!r?null:yn(e,r)}function Uo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vo(t,e,r){return e&&qo(t.prototype,e),t}function br(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ko=(function(){function t(e,r){Uo(this,t),br(this,"store",void 0),br(this,"registry",void 0),this.store=e,this.registry=r}return Vo(t,[{key:"subscribeToStateChange",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},s=i.handlerIds;O(typeof r=="function","listener must be a function."),O(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId,l=function(){var c=n.store.getState(),h=c.stateId;try{var y=h===o||h===o+1&&!Ao(c.dirtyHandlerIds,s);y||r()}finally{o=h}};return this.store.subscribe(l)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;O(typeof r=="function","listener must be a function.");var i=this.store.getState().dragOffset,s=function(){var l=n.store.getState().dragOffset;l!==i&&(i=l,r())};return this.store.subscribe(s)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return O(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(O(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(r),s=this.getItemType();return mt(i,s)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(O(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var i=this.registry.getSourceType(r),s=this.getItemType();return i!==s?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var i=n.shallow;if(!this.isDragging())return!1;var s=this.registry.getTargetType(r),o=this.getItemType();if(o&&!mt(s,o))return!1;var l=this.getTargetIds();if(!l.length)return!1;var u=l.indexOf(r);return i?u===l.length-1:u>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return zo(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return Bo(this.store.getState().dragOffset)}}]),t})(),Wo=0;function Go(){return Wo++}function Ae(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ae=function(r){return typeof r}:Ae=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ae(t)}function Yo(t){O(typeof t.canDrag=="function","Expected canDrag to be a function."),O(typeof t.beginDrag=="function","Expected beginDrag to be a function."),O(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Xo(t){O(typeof t.canDrop=="function","Expected canDrop to be a function."),O(typeof t.hover=="function","Expected hover to be a function."),O(typeof t.drop=="function","Expected beginDrag to be a function.")}function yt(t,e){if(e&&Array.isArray(t)){t.forEach(function(r){return yt(r,!1)});return}O(typeof t=="string"||Ae(t)==="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}const Sr=typeof global<"u"?global:self,bn=Sr.MutationObserver||Sr.WebKitMutationObserver;function Sn(t){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function Qo(t){let e=1;const r=new bn(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const Zo=typeof bn=="function"?Qo:Sn;class Jo{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Zo(this.flush),this.requestErrorThrow=Sn(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class ea{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class ta{create(e){const r=this.freeTasks,n=r.length?r.pop():new ea(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const xn=new Jo,ra=new ta(xn.registerPendingError);function na(t){xn.enqueueTask(ra.create(t))}function ia(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oa(t,e,r){return e&&sa(t.prototype,e),t}function de(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aa(t,e){return da(t)||ca(t,e)||ua(t,e)||la()}function la(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(t,e){if(t){if(typeof t=="string")return xr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xr(t,e)}}function xr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ca(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function da(t){if(Array.isArray(t))return t}function fa(t){var e=Go().toString();switch(t){case V.SOURCE:return"S".concat(e);case V.TARGET:return"T".concat(e);default:throw new Error("Unknown Handler Role: ".concat(t))}}function Dr(t){switch(t[0]){case"S":return V.SOURCE;case"T":return V.TARGET;default:O(!1,"Cannot parse handler ID: ".concat(t))}}function Or(t,e){var r=t.entries(),n=!1;do{var i=r.next(),s=i.done,o=aa(i.value,2),l=o[1];if(l===e)return!0;n=!!s}while(!n);return!1}var ha=(function(){function t(e){ia(this,t),de(this,"types",new Map),de(this,"dragSources",new Map),de(this,"dropTargets",new Map),de(this,"pinnedSourceId",null),de(this,"pinnedSource",null),de(this,"store",void 0),this.store=e}return oa(t,[{key:"addSource",value:function(r,n){yt(r),Yo(n);var i=this.addHandler(V.SOURCE,r,n);return this.store.dispatch(Co(i)),i}},{key:"addTarget",value:function(r,n){yt(r,!0),Xo(n);var i=this.addHandler(V.TARGET,r,n);return this.store.dispatch(_o(i)),i}},{key:"containsHandler",value:function(r){return Or(this.dragSources,r)||Or(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;O(this.isSourceId(r),"Expected a valid source ID.");var i=n&&r===this.pinnedSourceId,s=i?this.pinnedSource:this.dragSources.get(r);return s}},{key:"getTarget",value:function(r){return O(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return O(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return O(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=Dr(r);return n===V.SOURCE}},{key:"isTargetId",value:function(r){var n=Dr(r);return n===V.TARGET}},{key:"removeSource",value:function(r){var n=this;O(this.getSource(r),"Expected an existing source."),this.store.dispatch(Eo(r)),na(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){O(this.getTarget(r),"Expected an existing target."),this.store.dispatch(No(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);O(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){O(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,i){var s=fa(r);return this.types.set(s,n),r===V.SOURCE?this.dragSources.set(s,i):r===V.TARGET&&this.dropTargets.set(s,i),s}}]),t})();function ga(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=pa(n),s=new Ko(i,new ha(i)),o=new So(i,s),l=t(o,e,r);return o.receiveBackend(l),o}function pa(t){var e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return mn(Fo,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}var va=["children"];function ma(t,e){return xa(t)||Sa(t,e)||ba(t,e)||ya()}function ya(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ba(t,e){if(t){if(typeof t=="string")return wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(t,e)}}function wr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sa(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function xa(t){if(Array.isArray(t))return t}function Da(t,e){if(t==null)return{};var r=Oa(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Oa(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Ir=0,Me=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),wa=f.memo(function(e){var r=e.children,n=Da(e,va),i=Ia(n),s=ma(i,2),o=s[0],l=s[1];return f.useEffect(function(){if(l){var u=Dn();return++Ir,function(){--Ir===0&&(u[Me]=null)}}},[]),a.jsx(pn.Provider,Object.assign({value:o},{children:r}),void 0)});function Ia(t){if("manager"in t){var e={dragDropManager:t.manager};return[e,!1]}var r=Ta(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[r,n]}function Ta(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dn(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=e;return i[Me]||(i[Me]={dragDropManager:ga(t,e,r,n)}),i[Me]}function Dn(){return typeof global<"u"?global:window}function Ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ea(t,e,r){return e&&_a(t.prototype,e),t}function Tr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var nt=!1,it=!1,Na=(function(){function t(e){Ca(this,t),Tr(this,"internalMonitor",void 0),Tr(this,"sourceId",null),this.internalMonitor=e.getMonitor()}return Ea(t,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){O(!nt,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return nt=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{nt=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;O(!it,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return it=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{it=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),t})();function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ka(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pa(t,e,r){return e&&ka(t.prototype,e),t}function Cr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var st=!1,Ra=(function(){function t(e){ja(this,t),Cr(this,"internalMonitor",void 0),Cr(this,"targetId",null),this.internalMonitor=e.getMonitor()}return Pa(t,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;O(!st,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return st=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{st=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),t})();function Aa(t){if(typeof t.type!="string"){var e=t.type.displayName||t.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(e," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function Ma(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!f.isValidElement(e)){var n=e;return t(n,r),n}var i=e;Aa(i);var s=r?function(o){return t(o,r)}:t;return La(i,s)}}function On(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{var i=Ma(n);e[r]=function(){return i}}}),e}function _r(t,e){typeof t=="function"?t(e):t.current=e}function La(t,e){var r=t.ref;return O(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?f.cloneElement(t,{ref:function(i){_r(r,i),_r(e,i)}}):f.cloneElement(t,{ref:e})}function Le(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Le=function(r){return typeof r}:Le=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Le(t)}function bt(t){return t!==null&&Le(t)==="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function St(t,e,r,n){var i=void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;var s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(e),u=0;u<s.length;u++){var c=s[u];if(!l(c))return!1;var h=t[c],y=e[c];if(i=void 0,i===!1||i===void 0&&h!==y)return!1}return!0}function $a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ha(t,e,r){return e&&Fa(t.prototype,e),t}function M(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var za=(function(){function t(e){var r=this;$a(this,t),M(this,"hooks",On({dragSource:function(i,s){r.clearDragSource(),r.dragSourceOptions=s||null,bt(i)?r.dragSourceRef=i:r.dragSourceNode=i,r.reconnectDragSource()},dragPreview:function(i,s){r.clearDragPreview(),r.dragPreviewOptions=s||null,bt(i)?r.dragPreviewRef=i:r.dragPreviewNode=i,r.reconnectDragPreview()}})),M(this,"handlerId",null),M(this,"dragSourceRef",null),M(this,"dragSourceNode",void 0),M(this,"dragSourceOptionsInternal",null),M(this,"dragSourceUnsubscribe",void 0),M(this,"dragPreviewRef",null),M(this,"dragPreviewNode",void 0),M(this,"dragPreviewOptionsInternal",null),M(this,"dragPreviewUnsubscribe",void 0),M(this,"lastConnectedHandlerId",null),M(this,"lastConnectedDragSource",null),M(this,"lastConnectedDragSourceOptions",null),M(this,"lastConnectedDragPreview",null),M(this,"lastConnectedDragPreviewOptions",null),M(this,"backend",void 0),this.backend=e}return Ha(t,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!St(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!St(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),t})();function Ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ua(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qa(t,e,r){return e&&Ua(t.prototype,e),t}function Y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Va=(function(){function t(e){var r=this;Ba(this,t),Y(this,"hooks",On({dropTarget:function(i,s){r.clearDropTarget(),r.dropTargetOptions=s,bt(i)?r.dropTargetRef=i:r.dropTargetNode=i,r.reconnect()}})),Y(this,"handlerId",null),Y(this,"dropTargetRef",null),Y(this,"dropTargetNode",void 0),Y(this,"dropTargetOptionsInternal",null),Y(this,"unsubscribeDropTarget",void 0),Y(this,"lastConnectedHandlerId",null),Y(this,"lastConnectedDropTarget",null),Y(this,"lastConnectedDropTargetOptions",null),Y(this,"backend",void 0),this.backend=e}return qa(t,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!St(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),t})();function Ka(t,e,r){var n=r.getRegistry(),i=n.addTarget(t,e);return[i,function(){return n.removeTarget(i)}]}function Wa(t,e,r){var n=r.getRegistry(),i=n.addSource(t,e);return[i,function(){return n.removeSource(i)}]}var ne=typeof window<"u"?f.useLayoutEffect:f.useEffect;function $e(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$e=function(r){return typeof r}:$e=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$e(t)}function Ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ya(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xa(t,e,r){return e&&Ya(t.prototype,e),t}function ot(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qa=(function(){function t(e,r,n){Ga(this,t),ot(this,"spec",void 0),ot(this,"monitor",void 0),ot(this,"connector",void 0),this.spec=e,this.monitor=r,this.connector=n}return Xa(t,[{key:"beginDrag",value:function(){var r,n=this.spec,i=this.monitor,s=null;return $e(n.item)==="object"?s=n.item:typeof n.item=="function"?s=n.item(i):s={},(r=s)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var i=this.spec,s=this.monitor,o=i.isDragging;return o?o(s):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,i=this.connector,s=r.end;s&&s(n.getItem(),n),i.reconnect()}}]),t})();function Za(t,e,r){var n=f.useMemo(function(){return new Qa(t,e,r)},[e,r]);return f.useEffect(function(){n.spec=t},[t]),n}function oe(){var t=f.useContext(pn),e=t.dragDropManager;return O(e!=null,"Expected drag drop context"),e}function Ja(t){return f.useMemo(function(){var e=t.type;return O(e!=null,"spec.type must be defined"),e},[t])}function el(t,e){return il(t)||nl(t,e)||rl(t,e)||tl()}function tl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rl(t,e){if(t){if(typeof t=="string")return Er(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(t,e)}}function Er(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nl(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function il(t){if(Array.isArray(t))return t}function sl(t,e,r){var n=oe(),i=Za(t,e,r),s=Ja(t);ne(function(){if(s!=null){var l=Wa(s,i,n),u=el(l,2),c=u[0],h=u[1];return e.receiveHandlerId(c),r.receiveHandlerId(c),h}},[n,e,r,i,s])}function ol(t){return cl(t)||ul(t)||ll(t)||al()}function al(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ll(t,e){if(t){if(typeof t=="string")return xt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xt(t,e)}}function ul(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cl(t){if(Array.isArray(t))return xt(t)}function xt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wn(t,e){var r=ol(e||[]);return e==null&&typeof t!="function"&&r.push(t),f.useMemo(function(){return typeof t=="function"?t():t},r)}function dl(){var t=oe();return f.useMemo(function(){return new Na(t)},[t])}function fl(t,e){var r=oe(),n=f.useMemo(function(){return new za(r.getBackend())},[r]);return ne(function(){return n.dragSourceOptions=t||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,t]),ne(function(){return n.dragPreviewOptions=e||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,e]),n}var at,Nr;function hl(){return Nr||(Nr=1,at=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}),at}var gl=hl();const pl=Kr(gl);function vl(t,e){return Sl(t)||bl(t,e)||yl(t,e)||ml()}function ml(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(t,e){if(t){if(typeof t=="string")return jr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(t,e)}}function jr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bl(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function Sl(t){if(Array.isArray(t))return t}function In(t,e,r){var n=f.useState(function(){return e(t)}),i=vl(n,2),s=i[0],o=i[1],l=f.useCallback(function(){var u=e(t);pl(s,u)||(o(u),r&&r())},[s,t,r]);return ne(l),[s,l]}function xl(t,e){return Il(t)||wl(t,e)||Ol(t,e)||Dl()}function Dl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ol(t,e){if(t){if(typeof t=="string")return kr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kr(t,e)}}function kr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wl(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function Il(t){if(Array.isArray(t))return t}function Tl(t,e,r){var n=In(t,e,r),i=xl(n,2),s=i[0],o=i[1];return ne(function(){var u=t.getHandlerId();if(u!=null)return t.subscribeToStateChange(o,{handlerIds:[u]})},[t,o]),s}function Tn(t,e,r){return Tl(e,t||function(){return{}},function(){return r.reconnect()})}function Cl(t){return f.useMemo(function(){return t.hooks.dragSource()},[t])}function _l(t){return f.useMemo(function(){return t.hooks.dragPreview()},[t])}function El(t,e){var r=wn(t,e);O(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=dl(),i=fl(r.options,r.previewOptions);return sl(r,n,i),[Tn(r.collect,n,i),Cl(i),_l(i)]}function Nl(t){var e=t.accept;return f.useMemo(function(){return O(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]},[e])}function jl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pl(t,e,r){return e&&kl(t.prototype,e),t}function Pr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Rl=(function(){function t(e,r){jl(this,t),Pr(this,"spec",void 0),Pr(this,"monitor",void 0),this.spec=e,this.monitor=r}return Pl(t,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),t})();function Al(t,e){var r=f.useMemo(function(){return new Rl(t,e)},[e]);return f.useEffect(function(){r.spec=t},[t]),r}function Ml(t,e){return Hl(t)||Fl(t,e)||$l(t,e)||Ll()}function Ll(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $l(t,e){if(t){if(typeof t=="string")return Rr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rr(t,e)}}function Rr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fl(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function Hl(t){if(Array.isArray(t))return t}function zl(t,e,r){var n=oe(),i=Al(t,e),s=Nl(t);ne(function(){var l=Ka(s,i,n),u=Ml(l,2),c=u[0],h=u[1];return e.receiveHandlerId(c),r.receiveHandlerId(c),h},[n,e,i,r,s.map(function(o){return o.toString()}).join("|")])}function Bl(){var t=oe();return f.useMemo(function(){return new Ra(t)},[t])}function Ul(t){var e=oe(),r=f.useMemo(function(){return new Va(e.getBackend())},[e]);return ne(function(){return r.dropTargetOptions=t||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[t]),r}function ql(t){return f.useMemo(function(){return t.hooks.dropTarget()},[t])}function Cn(t,e){var r=wn(t,e),n=Bl(),i=Ul(r.options);return zl(r,n,i),[Tn(r.collect,n,i),ql(i)]}function Vl(t,e){return Yl(t)||Gl(t,e)||Wl(t,e)||Kl()}function Kl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wl(t,e){if(t){if(typeof t=="string")return Ar(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ar(t,e)}}function Ar(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gl(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw l}}return n}}function Yl(t){if(Array.isArray(t))return t}function Xl(t){var e=oe(),r=e.getMonitor(),n=In(r,t),i=Vl(n,2),s=i[0],o=i[1];return f.useEffect(function(){return r.subscribeToOffsetChange(o)}),f.useEffect(function(){return r.subscribeToStateChange(o)}),s}function _n(t){var e=null,r=function(){return e==null&&(e=t()),e};return r}function Ql(t,e){return t.filter(function(r){return r!==e})}function Zl(t,e){var r=new Set,n=function(o){return r.add(o)};t.forEach(n),e.forEach(n);var i=[];return r.forEach(function(s){return i.push(s)}),i}function Jl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tu(t,e,r){return e&&eu(t.prototype,e),t}function Mr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ru=(function(){function t(e){Jl(this,t),Mr(this,"entered",[]),Mr(this,"isNodeInDocument",void 0),this.isNodeInDocument=e}return tu(t,[{key:"enter",value:function(r){var n=this,i=this.entered.length,s=function(l){return n.isNodeInDocument(l)&&(!l.contains||l.contains(r))};return this.entered=Zl(this.entered.filter(s),[r]),i===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=Ql(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),t})(),nu=_n(function(){return/firefox/i.test(navigator.userAgent)}),En=_n(function(){return!!window.safari});function iu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function su(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ou(t,e,r){return e&&su(t.prototype,e),t}function Se(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Lr=(function(){function t(e,r){iu(this,t),Se(this,"xs",void 0),Se(this,"ys",void 0),Se(this,"c1s",void 0),Se(this,"c2s",void 0),Se(this,"c3s",void 0);for(var n=e.length,i=[],s=0;s<n;s++)i.push(s);i.sort(function(j,P){return e[j]<e[P]?-1:1});for(var o=[],l=[],u,c,h=0;h<n-1;h++)u=e[h+1]-e[h],c=r[h+1]-r[h],o.push(u),l.push(c/u);for(var y=[l[0]],w=0;w<o.length-1;w++){var C=l[w],x=l[w+1];if(C*x<=0)y.push(0);else{u=o[w];var d=o[w+1],g=u+d;y.push(3*g/((g+d)/C+(g+u)/x))}}y.push(l[l.length-1]);for(var v=[],m=[],S,T=0;T<y.length-1;T++){S=l[T];var I=y[T],D=1/o[T],N=I+y[T+1]-S-S;v.push((S-I-N)*D),m.push(N*D*D)}this.xs=e,this.ys=r,this.c1s=y,this.c2s=v,this.c3s=m}return ou(t,[{key:"interpolate",value:function(r){var n=this.xs,i=this.ys,s=this.c1s,o=this.c2s,l=this.c3s,u=n.length-1;if(r===n[u])return i[u];for(var c=0,h=l.length-1,y;c<=h;){y=Math.floor(.5*(c+h));var w=n[y];if(w<r)c=y+1;else if(w>r)h=y-1;else return i[y]}u=Math.max(0,h);var C=r-n[u],x=C*C;return i[u]+s[u]*C+o[u]*x+l[u]*C*x}}]),t})(),au=1;function Nn(t){var e=t.nodeType===au?t:t.parentElement;if(!e)return null;var r=e.getBoundingClientRect(),n=r.top,i=r.left;return{x:i,y:n}}function _e(t){return{x:t.clientX,y:t.clientY}}function lu(t){var e;return t.nodeName==="IMG"&&(nu()||!((e=document.documentElement)!==null&&e!==void 0&&e.contains(t)))}function uu(t,e,r,n){var i=t?e.width:r,s=t?e.height:n;return En()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function cu(t,e,r,n,i){var s=lu(e),o=s?t:e,l=Nn(o),u={x:r.x-l.x,y:r.y-l.y},c=t.offsetWidth,h=t.offsetHeight,y=n.anchorX,w=n.anchorY,C=uu(s,e,c,h),x=C.dragPreviewWidth,d=C.dragPreviewHeight,g=function(){var N=new Lr([0,.5,1],[u.y,u.y/h*d,u.y+d-h]),j=N.interpolate(w);return En()&&s&&(j+=(window.devicePixelRatio-1)*d),j},v=function(){var N=new Lr([0,.5,1],[u.x,u.x/c*x,u.x+x-c]);return N.interpolate(y)},m=i.offsetX,S=i.offsetY,T=m===0||m,I=S===0||S;return{x:T?m:v(),y:I?S:g()}}var jn="__NATIVE_FILE__",kn="__NATIVE_URL__",Pn="__NATIVE_TEXT__",Rn="__NATIVE_HTML__";const $r=Object.freeze(Object.defineProperty({__proto__:null,FILE:jn,HTML:Rn,TEXT:Pn,URL:kn},Symbol.toStringTag,{value:"Module"}));function lt(t,e,r){var n=e.reduce(function(i,s){return i||t.getData(s)},"");return n??r}var fe;function Ee(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Dt=(fe={},Ee(fe,jn,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:["Files"]}),Ee(fe,Rn,{exposeProperties:{html:function(e,r){return lt(e,r,"")},dataTransfer:function(e){return e}},matchesTypes:["Html","text/html"]}),Ee(fe,kn,{exposeProperties:{urls:function(e,r){return lt(e,r,"").split(`
`)},dataTransfer:function(e){return e}},matchesTypes:["Url","text/uri-list"]}),Ee(fe,Pn,{exposeProperties:{text:function(e,r){return lt(e,r,"")},dataTransfer:function(e){return e}},matchesTypes:["Text","text/plain"]}),fe);function du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hu(t,e,r){return e&&fu(t.prototype,e),t}function Fr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var gu=(function(){function t(e){du(this,t),Fr(this,"item",void 0),Fr(this,"config",void 0),this.config=e,this.item={},this.initializeExposedProperties()}return hu(t,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var i={};Object.keys(this.config.exposeProperties).forEach(function(s){i[s]={value:n.config.exposeProperties[s](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,i)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),t})();function pu(t,e){var r=new gu(Dt[t]);return r.loadDataTransfer(e),r}function ut(t){if(!t)return null;var e=Array.prototype.slice.call(t.types||[]);return Object.keys(Dt).filter(function(r){var n=Dt[r].matchesTypes;return n.some(function(i){return e.indexOf(i)>-1})})[0]||null}function vu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yu(t,e,r){return e&&mu(t.prototype,e),t}function ct(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var bu=(function(){function t(e,r){vu(this,t),ct(this,"ownerDocument",null),ct(this,"globalContext",void 0),ct(this,"optionsArgs",void 0),this.globalContext=e,this.optionsArgs=r}return yu(t,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),t})();function Hr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hr(Object(r),!0).forEach(function(n){_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Su(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Du(t,e,r){return e&&xu(t.prototype,e),t}function _(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ou=(function(){function t(e,r,n){var i=this;Su(this,t),_(this,"options",void 0),_(this,"actions",void 0),_(this,"monitor",void 0),_(this,"registry",void 0),_(this,"enterLeaveCounter",void 0),_(this,"sourcePreviewNodes",new Map),_(this,"sourcePreviewNodeOptions",new Map),_(this,"sourceNodes",new Map),_(this,"sourceNodeOptions",new Map),_(this,"dragStartSourceIds",null),_(this,"dropTargetIds",[]),_(this,"dragEnterTargetIds",[]),_(this,"currentNativeSource",null),_(this,"currentNativeHandle",null),_(this,"currentDragSourceNode",null),_(this,"altKeyPressed",!1),_(this,"mouseMoveTimeoutTimer",null),_(this,"asyncEndDragFrameId",null),_(this,"dragOverTargetIds",null),_(this,"lastClientOffset",null),_(this,"hoverRafId",null),_(this,"getSourceClientOffset",function(s){var o=i.sourceNodes.get(s);return o&&Nn(o)||null}),_(this,"endDragNativeItem",function(){i.isDraggingNativeItem()&&(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)}),_(this,"isNodeInDocument",function(s){return!!(s&&i.document&&i.document.body&&i.document.body.contains(s))}),_(this,"endDragIfSourceWasRemovedFromDOM",function(){var s=i.currentDragSourceNode;s==null||i.isNodeInDocument(s)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),_(this,"handleTopDragStartCapture",function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]}),_(this,"handleTopDragStart",function(s){if(!s.defaultPrevented){var o=i.dragStartSourceIds;i.dragStartSourceIds=null;var l=_e(s);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:l});var u=s.dataTransfer,c=ut(u);if(i.monitor.isDragging()){if(u&&typeof u.setDragImage=="function"){var h=i.monitor.getSourceId(),y=i.sourceNodes.get(h),w=i.sourcePreviewNodes.get(h)||y;if(w){var C=i.getCurrentSourcePreviewNodeOptions(),x=C.anchorX,d=C.anchorY,g=C.offsetX,v=C.offsetY,m={anchorX:x,anchorY:d},S={offsetX:g,offsetY:v},T=cu(y,w,l,m,S);u.setDragImage(w,T.x,T.y)}}try{u?.setData("application/json",{})}catch{}i.setCurrentDragSourceNode(s.target);var I=i.getCurrentSourcePreviewNodeOptions(),D=I.captureDraggingState;D?i.actions.publishDragSource():setTimeout(function(){return i.actions.publishDragSource()},0)}else if(c)i.beginDragNativeItem(c);else{if(u&&!u.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}}}),_(this,"handleTopDragEndCapture",function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),_(this,"handleTopDragEnterCapture",function(s){i.dragEnterTargetIds=[];var o=i.enterLeaveCounter.enter(s.target);if(!(!o||i.monitor.isDragging())){var l=s.dataTransfer,u=ut(l);u&&i.beginDragNativeItem(u,l)}}),_(this,"handleTopDragEnter",function(s){var o=i.dragEnterTargetIds;if(i.dragEnterTargetIds=[],!!i.monitor.isDragging()){i.altKeyPressed=s.altKey,o.length>0&&i.actions.hover(o,{clientOffset:_e(s)});var l=o.some(function(u){return i.monitor.canDropOnTarget(u)});l&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=i.getCurrentDropEffect()))}}),_(this,"handleTopDragOverCapture",function(){i.dragOverTargetIds=[]}),_(this,"handleTopDragOver",function(s){var o=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}i.altKeyPressed=s.altKey,i.lastClientOffset=_e(s),i.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(i.hoverRafId=requestAnimationFrame(function(){i.monitor.isDragging()&&i.actions.hover(o||[],{clientOffset:i.lastClientOffset}),i.hoverRafId=null}));var l=(o||[]).some(function(u){return i.monitor.canDropOnTarget(u)});l?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))}),_(this,"handleTopDragLeaveCapture",function(s){i.isDraggingNativeItem()&&s.preventDefault();var o=i.enterLeaveCounter.leave(s.target);o&&i.isDraggingNativeItem()&&setTimeout(function(){return i.endDragNativeItem()},0)}),_(this,"handleTopDropCapture",function(s){if(i.dropTargetIds=[],i.isDraggingNativeItem()){var o;s.preventDefault(),(o=i.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else ut(s.dataTransfer)&&s.preventDefault();i.enterLeaveCounter.reset()}),_(this,"handleTopDrop",function(s){var o=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(o,{clientOffset:_e(s)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()}),_(this,"handleSelectStart",function(s){var o=s.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(s.preventDefault(),o.dragDrop()))}),this.options=new bu(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new ru(this.isNodeInDocument)}return Du(t,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,i){var s=this;return this.sourcePreviewNodeOptions.set(r,i),this.sourcePreviewNodes.set(r,n),function(){s.sourcePreviewNodes.delete(r),s.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,i){var s=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,i);var o=function(c){return s.handleDragStart(c,r)},l=function(c){return s.handleSelectStart(c)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",o),n.addEventListener("selectstart",l),function(){s.sourceNodes.delete(r),s.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",o),n.removeEventListener("selectstart",l),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var i=this,s=function(c){return i.handleDragEnter(c,r)},o=function(c){return i.handleDragOver(c,r)},l=function(c){return i.handleDrop(c,r)};return n.addEventListener("dragenter",s),n.addEventListener("dragover",o),n.addEventListener("drop",l),function(){n.removeEventListener("dragenter",s),n.removeEventListener("dragover",o),n.removeEventListener("drop",l)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return zr({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return zr({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys($r).some(function(n){return $r[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=pu(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var i=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var s;return(s=n.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},i)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),t})(),Ne;function wu(){return Ne||(Ne=new Image,Ne.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Ne}var Iu=function(e,r,n){return new Ou(e,r,n)};function Tu(t){const e=H(),r=e.selectedIds,[n,i,s]=El(()=>({canDrag:()=>t.isDraggable,type:"NODE",item:()=>{const o=e.isSelected(t.id)?Array.from(r):[t.id];return e.dispatch(ve.dragStart(t.id,o)),{id:t.id,dragIds:o}},end:()=>{e.hideCursor(),e.dispatch(ve.dragEnd())}}),[r,t]);return f.useEffect(()=>{s(wu())},[s]),i}function Cu(t,e){const r=t.getBoundingClientRect(),n=e.x-Math.round(r.x),i=e.y-Math.round(r.y),s=r.height,o=i<s/2,l=!o,u=s/4,c=i>u&&i<s-u;return{x:n,inTopHalf:o,inBottomHalf:l,inMiddle:c,atTop:!c&&o,atBottom:!c&&l}}function _u(t,e,r,n){return t?t.isInternal?n.atTop?[e,t]:n.inMiddle?[t,t]:[t,r]:n.inTopHalf?[e,t]:[t,r]:[e,null]}function je(t,e){return{parentId:t||null,index:e}}function he(t,e){return{type:"line",index:t,level:e}}function Eu(t){return{type:"highlight",id:t}}function dt(t,e){var r;let n=t;for(;n.parent&&n.level>e;)n=n.parent;const i=((r=n.parent)===null||r===void 0?void 0:r.id)||null,s=sn(n)+1;return{parentId:i,index:s}}function An(t){var e;const r=Cu(t.element,t.offset),n=t.indent,i=Math.round(Math.max(0,r.x-n)/n),{node:s,nextNode:o,prevNode:l}=t,[u,c]=_u(s,l,o,r);if(s&&s.isInternal&&r.inMiddle)return{drop:je(s.id,null),cursor:Eu(s.id)};if(!u)return{drop:je((e=c?.parent)===null||e===void 0?void 0:e.id,0),cursor:he(0,0)};if(en(u)){const h=Pe(i,c?.level||0,u.level);return{drop:dt(u,h),cursor:he(u.rowIndex+1,h)}}if(tn(u)){const h=Pe(i,c?.level||0,u.level);return{drop:dt(u,h),cursor:he(u.rowIndex+1,h)}}if(rn(u)){const h=Pe(i,0,u.level+1);return h>u.level?{drop:je(u.id,0),cursor:he(u.rowIndex+1,h)}:{drop:dt(u,h),cursor:he(u.rowIndex+1,h)}}return{drop:je(u?.id,0),cursor:he(u.rowIndex+1,u.level+1)}}function Nu(t,e){const r=H(),[n,i]=Cn(()=>({accept:"NODE",canDrop:()=>r.canDrop(),hover:(s,o)=>{const l=o.getClientOffset();if(!t.current||!l)return;const{cursor:u,drop:c}=An({element:t.current,offset:l,indent:r.indent,node:e,prevNode:e.prev,nextNode:e.next});c&&r.dispatch(ve.hovering(c.parentId,c.index)),o.canDrop()?u&&r.showCursor(u):r.hideCursor()},drop:(s,o)=>{if(!o.canDrop())return null;let{parentId:l,index:u,dragIds:c}=r.state.dnd;cn(r.props.onMove,{dragIds:c,parentId:l===Oe?null:l,index:u===null?0:u,dragNodes:r.dragNodes,parentNode:r.get(l)}),r.open(l)}}),[e,t.current,r.props]);return i}function ju(t){const e=H(),r=e.at(t);if(!r)throw new Error(`Could not find node for index: ${t}`);return f.useMemo(()=>{const n=r.clone();return e.visibleNodes[t]=n,n},[...Object.values(r.state),r])}const ku=J.memo(function({index:e,style:r}){Jr(),ts();const n=H(),i=ju(e),s=f.useRef(null),o=Tu(i),l=Nu(s,i),u=f.useCallback(d=>{s.current=d,l(d)},[l]),c=n.indent*i.level,h=f.useMemo(()=>({paddingLeft:c}),[c]),y=f.useMemo(()=>{var d,g;return Object.assign(Object.assign({},r),{top:parseFloat(r.top)+((g=(d=n.props.padding)!==null&&d!==void 0?d:n.props.paddingTop)!==null&&g!==void 0?g:0)})},[r,n.props.padding,n.props.paddingTop]),w={role:"treeitem","aria-level":i.level+1,"aria-selected":i.isSelected,"aria-expanded":i.isOpen,style:y,tabIndex:-1,className:n.props.rowClassName};f.useEffect(()=>{var d;!i.isEditing&&i.isFocused&&((d=s.current)===null||d===void 0||d.focus({preventScroll:!0}))},[i.isEditing,i.isFocused,s.current]);const C=n.renderNode,x=n.renderRow;return a.jsx(x,{node:i,innerRef:u,attrs:w,children:a.jsx(C,{node:i,tree:n,style:h,dragHandle:o})})});let ft="",Br=null;function Mn(){Jr();const t=H();return a.jsx("div",{role:"tree",style:{height:t.height,width:t.width,minHeight:0,minWidth:0},onContextMenu:t.props.onContextMenu,onClick:t.props.onClick,tabIndex:0,onFocus:e=>{e.currentTarget.contains(e.relatedTarget)||t.onFocus()},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||t.onBlur()},onKeyDown:e=>{var r;if(t.isEditing)return;if(e.key==="Backspace"){if(!t.props.onDelete)return;const i=Array.from(t.selectedIds);if(i.length>1){let s=t.mostRecentNode;for(;s&&s.isSelected;)s=s.nextSibling;s||(s=t.lastNode),t.focus(s,{scroll:!1}),t.delete(Array.from(i))}else{const s=t.focusedNode;if(s){const o=s.nextSibling,l=s.parent;t.focus(o||l,{scroll:!1}),t.delete(s)}}return}if(e.key==="Tab"&&!e.shiftKey){e.preventDefault(),on(e.currentTarget);return}if(e.key==="Tab"&&e.shiftKey){e.preventDefault(),an(e.currentTarget);return}if(e.key==="ArrowDown"){e.preventDefault();const i=t.nextNode;if(e.metaKey){t.select(t.focusedNode),t.activate(t.focusedNode);return}else if(!e.shiftKey||t.props.disableMultiSelection){t.focus(i);return}else{if(!i)return;const s=t.focusedNode;s?s.isSelected?t.selectContiguous(i):t.selectMulti(i):t.focus(t.firstNode);return}}if(e.key==="ArrowUp"){e.preventDefault();const i=t.prevNode;if(!e.shiftKey||t.props.disableMultiSelection){t.focus(i);return}else{if(!i)return;const s=t.focusedNode;s?s.isSelected?t.selectContiguous(i):t.selectMulti(i):t.focus(t.lastNode);return}}if(e.key==="ArrowRight"){const i=t.focusedNode;if(!i)return;i.isInternal&&i.isOpen?t.focus(t.nextNode):i.isInternal&&t.open(i.id);return}if(e.key==="ArrowLeft"){const i=t.focusedNode;if(!i||i.isRoot)return;i.isInternal&&i.isOpen?t.close(i.id):!((r=i.parent)===null||r===void 0)&&r.isRoot||t.focus(i.parent);return}if(e.key==="a"&&e.metaKey&&!t.props.disableMultiSelection){e.preventDefault(),t.selectAll();return}if(e.key==="a"&&!e.metaKey&&t.props.onCreate){t.createLeaf();return}if(e.key==="A"&&!e.metaKey){if(!t.props.onCreate)return;t.createInternal();return}if(e.key==="Home"){e.preventDefault(),t.focus(t.firstNode);return}if(e.key==="End"){e.preventDefault(),t.focus(t.lastNode);return}if(e.key==="Enter"){const i=t.focusedNode;if(!i||!i.isEditable||!t.props.onRename)return;setTimeout(()=>{i&&t.edit(i)});return}if(e.key===" "){e.preventDefault();const i=t.focusedNode;if(!i)return;i.isLeaf?(i.select(),i.activate()):i.toggle();return}if(e.key==="*"){const i=t.focusedNode;if(!i)return;t.openSiblings(i);return}if(e.key==="PageUp"){e.preventDefault(),t.pageUp();return}e.key==="PageDown"&&(e.preventDefault(),t.pageDown()),clearTimeout(Br),ft+=e.key,Br=setTimeout(()=>{ft=""},600);const n=t.visibleNodes.find(i=>{const s=i.data.name;return typeof s=="string"?s.toLowerCase().startsWith(ft):!1});n&&t.focus(n.id)},children:a.jsx($s,{className:t.props.className,outerRef:t.listEl,itemCount:t.visibleNodes.length,height:t.height,width:t.width,itemSize:t.rowHeight,overscanCount:t.overscanCount,itemKey:e=>{var r;return((r=t.visibleNodes[e])===null||r===void 0?void 0:r.id)||e},outerElementType:zs,innerElementType:qs,onScroll:t.props.onScroll,onItemsRendered:t.onItemsRendered.bind(t),ref:t.list,children:ku})})}function Ur(t){return t.isFiltered?Ru(t.root,t.isMatch.bind(t)):Pu(t.root)}function Pu(t){const e=[];function r(n){var i;n.level>=0&&e.push(n),n.isOpen&&((i=n.children)===null||i===void 0||i.forEach(r))}return r(t),e.forEach(Ln),e}function Ru(t,e){const r={},n=[];function i(o){if(!o.isRoot&&e(o)){r[o.id]=!0;let u=o.parent;for(;u;)r[u.id]=!0,u=u.parent}if(o.children)for(let u of o.children)i(u)}function s(o){var l;o.level>=0&&r[o.id]&&n.push(o),o.isOpen&&((l=o.children)===null||l===void 0||l.forEach(s))}return i(t),s(t),n.forEach(Ln),n}function Ln(t,e){t.rowIndex=e}const qr=t=>t.reduce((e,r,n)=>(e[r.id]=n,e),{});var ht=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(h){try{c(n.next(h))}catch(y){o(y)}}function u(h){try{c(n.throw(h))}catch(y){o(y)}}function c(h){h.done?s(h.value):i(h.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};const{safeRun:R,identify:X,identifyNull:W}=as;class De{constructor(e,r,n,i){this.store=e,this.props=r,this.list=n,this.listEl=i,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=Jt(this),this.visibleNodes=Ur(this),this.idToIndex=qr(this.visibleNodes)}update(e){this.props=e,this.root=Jt(this),this.visibleNodes=Ur(this),this.idToIndex=qr(this.visibleNodes)}dispatch(e){return this.store.dispatch(e)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var e;return(e=this.props.width)!==null&&e!==void 0?e:300}get height(){var e;return(e=this.props.height)!==null&&e!==void 0?e:500}get indent(){var e;return(e=this.props.indent)!==null&&e!==void 0?e:24}get rowHeight(){var e;return(e=this.props.rowHeight)!==null&&e!==void 0?e:24}get overscanCount(){var e;return(e=this.props.overscanCount)!==null&&e!==void 0?e:1}get searchTerm(){return(this.props.searchTerm||"").trim()}get matchFn(){var e;const r=(e=this.props.searchMatch)!==null&&e!==void 0?e:((n,i)=>JSON.stringify(Object.values(n.data)).toLocaleLowerCase().includes(i.toLocaleLowerCase()));return n=>r(n,this.searchTerm)}accessChildren(e){var r;const n=this.props.childrenAccessor||"children";return(r=xe(e,n))!==null&&r!==void 0?r:null}accessId(e){const r=this.props.idAccessor||"id",n=xe(e,r);if(!n)throw new Error("Data must contain an 'id' property or props.idAccessor must return a string");return n}get firstNode(){var e;return(e=this.visibleNodes[0])!==null&&e!==void 0?e:null}get lastNode(){var e;return(e=this.visibleNodes[this.visibleNodes.length-1])!==null&&e!==void 0?e:null}get focusedNode(){var e;return(e=this.get(this.state.nodes.focus.id))!==null&&e!==void 0?e:null}get mostRecentNode(){var e;return(e=this.get(this.state.nodes.selection.mostRecent))!==null&&e!==void 0?e:null}get nextNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e+1)}get prevNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e-1)}get(e){return e&&e in this.idToIndex&&this.visibleNodes[this.idToIndex[e]]||null}at(e){return this.visibleNodes[e]||null}nodesBetween(e,r){var n;if(e===null||r===null)return[];const i=(n=this.indexOf(e))!==null&&n!==void 0?n:0,s=this.indexOf(r);if(s===null)return[];const o=Math.min(i,s),l=Math.max(i,s);return this.visibleNodes.slice(o,l+1)}indexOf(e){const r=un(e);return r?this.idToIndex[r]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:"internal"})}createLeaf(){return this.create({type:"leaf"})}create(){return ht(this,arguments,void 0,function*(e={}){var r,n;const i=e.parentId===void 0?hn(this):e.parentId,s=(r=e.index)!==null&&r!==void 0?r:fn(this),o=(n=e.type)!==null&&n!==void 0?n:"leaf",l=yield R(this.props.onCreate,{type:o,parentId:i,index:s,parentNode:this.get(i)});l&&(this.focus(l),setTimeout(()=>{this.edit(l).then(()=>{this.select(l),this.activate(l)})}))})}delete(e){return ht(this,void 0,void 0,function*(){if(!e)return;const n=(Array.isArray(e)?e:[e]).map(X),i=n.map(s=>this.get(s)).filter(s=>!!s);yield R(this.props.onDelete,{nodes:i,ids:n})})}edit(e){const r=X(e);return this.resolveEdit({cancelled:!0}),this.scrollTo(r),this.dispatch(et(r)),new Promise(n=>{De.editPromise=n})}submit(e,r){return ht(this,void 0,void 0,function*(){if(!e)return;const n=X(e);yield R(this.props.onRename,{id:n,name:r,node:this.get(n)}),this.dispatch(et(null)),this.resolveEdit({cancelled:!1,value:r}),setTimeout(()=>this.onFocus())})}reset(){this.dispatch(et(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=>this.onFocus())}activate(e){const r=this.get(W(e));r&&R(this.props.onActivate,r)}resolveEdit(e){const r=De.editPromise;r&&r(e),De.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let e=[];for(let r of Array.from(this.selectedIds)){const n=this.get(r);n&&e.push(n)}return e}focus(e,r={}){e&&(this.props.selectionFollowsFocus?this.select(e):(this.dispatch(ue(X(e))),r.scroll!==!1&&this.scrollTo(e),this.focusedNode&&R(this.props.onFocus,this.focusedNode)))}pageUp(){var e,r;const n=this.visibleStartIndex,s=this.visibleStopIndex-n;let o=(r=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&&r!==void 0?r:0;o>n?o=n:o=Math.max(n-s,0),this.focus(this.at(o))}pageDown(){var e,r;const n=this.visibleStartIndex,i=this.visibleStopIndex,s=i-n;let o=(r=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&&r!==void 0?r:0;o<i?o=i:o=Math.min(o+s,this.visibleNodes.length-1),this.focus(this.at(o))}select(e,r={}){if(!e)return;const n=r.focus!==!1,i=X(e);n&&this.dispatch(ue(i)),this.dispatch(K.only(i)),this.dispatch(K.anchor(i)),this.dispatch(K.mostRecent(i)),this.scrollTo(i,r.align),this.focusedNode&&n&&R(this.props.onFocus,this.focusedNode),R(this.props.onSelect,this.selectedNodes)}deselect(e){if(!e)return;const r=X(e);this.dispatch(K.remove(r)),R(this.props.onSelect,this.selectedNodes)}selectMulti(e){const r=this.get(W(e));r&&(this.dispatch(ue(r.id)),this.dispatch(K.add(r.id)),this.dispatch(K.anchor(r.id)),this.dispatch(K.mostRecent(r.id)),this.scrollTo(r),this.focusedNode&&R(this.props.onFocus,this.focusedNode),R(this.props.onSelect,this.selectedNodes))}selectContiguous(e){if(!e)return;const r=X(e),{anchor:n,mostRecent:i}=this.state.nodes.selection;this.dispatch(ue(r)),this.dispatch(K.remove(this.nodesBetween(n,i))),this.dispatch(K.add(this.nodesBetween(n,W(r)))),this.dispatch(K.mostRecent(r)),this.scrollTo(r),this.focusedNode&&R(this.props.onFocus,this.focusedNode),R(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),R(this.props.onSelect,this.selectedNodes)}selectAll(){var e;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(ue((e=this.lastNode)===null||e===void 0?void 0:e.id)),this.focusedNode&&R(this.props.onFocus,this.focusedNode),R(this.props.onSelect,this.selectedNodes)}setSelection(e){var r;const n=new Set((r=e.ids)===null||r===void 0?void 0:r.map(X)),i=W(e.anchor),s=W(e.mostRecent);this.dispatch(K.set({ids:n,anchor:i,mostRecent:s})),R(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor:e}=this.state.dnd;switch(e.type){case"highlight":return e.id;default:return null}}get cursorOverFolder(){return this.state.dnd.cursor.type==="highlight"}get dragNodes(){return this.state.dnd.dragIds.map(e=>this.get(e)).filter(e=>!!e)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var e;if(this.isFiltered)return!1;const r=(e=this.get(this.state.dnd.parentId))!==null&&e!==void 0?e:this.root,n=this.dragNodes,i=this.props.disableDrop;for(const s of n)if(!s||!r||s.isInternal&&nn(r,s))return!1;return typeof i=="function"?!i({parentNode:r,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):typeof i=="string"?!r.data[i]:typeof i=="boolean"?!i:!0}hideCursor(){this.dispatch(ve.cursor({type:"none"}))}showCursor(e){this.dispatch(ve.cursor(e))}open(e){const r=W(e);r&&(this.isOpen(r)||(this.dispatch(pt.open(r,this.isFiltered)),R(this.props.onToggle,r)))}close(e){const r=W(e);r&&this.isOpen(r)&&(this.dispatch(pt.close(r,this.isFiltered)),R(this.props.onToggle,r))}toggle(e){const r=W(e);if(r)return this.isOpen(r)?this.close(r):this.open(r)}openParents(e){const r=W(e);if(!r)return;const n=Tt(this.root,r);let i=n?.parent;for(;i;)this.open(i.id),i=i.parent}openSiblings(e){const r=e.parent;if(!r)this.toggle(e.id);else if(r.children){const n=e.isOpen;for(let i of r.children)i.isInternal&&(n?this.close(i.id):this.open(i.id));this.scrollTo(this.focusedNode)}}openAll(){Fe(this.root,e=>{e.isInternal&&e.open()})}closeAll(){Fe(this.root,e=>{e.isInternal&&e.close()})}scrollTo(e,r="smart"){if(!e)return;const n=X(e);return this.openParents(n),dn(()=>n in this.idToIndex).then(()=>{var i;const s=this.idToIndex[n];s!==void 0&&((i=this.list.current)===null||i===void 0||i.scrollToItem(s,r))}).catch(()=>{})}get isEditing(){return this.state.nodes.edit.id!==null}get isFiltered(){var e;return!!(!((e=this.props.searchTerm)===null||e===void 0)&&e.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return this.state.nodes.selection.ids.size===0}get hasOneSelection(){return this.state.nodes.selection.ids.size===1}get hasMultipleSelections(){return this.state.nodes.selection.ids.size>1}isSelected(e){return e?this.state.nodes.selection.ids.has(e):!1}isOpen(e){var r,n,i;if(!e)return!1;if(e===Oe)return!0;const s=(r=this.props.openByDefault)!==null&&r!==void 0?r:!0;return this.isFiltered?(n=this.state.nodes.open.filtered[e])!==null&&n!==void 0?n:!0:(i=this.state.nodes.open.unfiltered[e])!==null&&i!==void 0?i:s}isEditable(e){const r=this.props.disableEdit||(()=>!1);return!xe(e,r)}isDraggable(e){const r=this.props.disableDrag||(()=>!1);return!xe(e,r)}isDragging(e){const r=W(e);return r?this.state.nodes.drag.id===r:!1}isFocused(e){return this.hasFocus&&this.state.nodes.focus.id===e}isMatch(e){return this.matchFn(e)}willReceiveDrop(e){const r=W(e);if(!r)return!1;const{destinationParentId:n,destinationIndex:i}=this.state.nodes.drag;return r===n&&i===null}onFocus(){const e=this.focusedNode||this.firstNode;e&&this.dispatch(ue(e.id))}onBlur(){this.dispatch(ms())}onItemsRendered(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleStopIndex=e.visibleStopIndex}get renderContainer(){return this.props.renderContainer||Mn}get renderRow(){return this.props.renderRow||fs}get renderNode(){return this.props.children||hs}get renderDragPreview(){return this.props.renderDragPreview||gn}get renderCursor(){return this.props.renderCursor||ds}}function Au(t=pe().nodes.drag,e){switch(e.type){case"DND_DRAG_START":return Object.assign(Object.assign({},t),{id:e.id,selectedIds:e.dragIds});case"DND_DRAG_END":return Object.assign(Object.assign({},t),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case"DND_HOVERING":return e.parentId!==t.destinationParentId||e.index!=t.destinationIndex?Object.assign(Object.assign({},t),{destinationParentId:e.parentId,destinationIndex:e.index}):t;default:return t}}const Mu=Rt({nodes:Rt({focus:ys,edit:vs,open:bs,selection:Ss,drag:Au}),dnd:xs}),Lu=pe();function $u({treeProps:t,imperativeHandle:e,children:r}){const n=f.useRef(null),i=f.useRef(null),s=f.useRef(qn(Mu,pe(t))),o=wt.useSyncExternalStore(s.current.subscribe,s.current.getState,()=>Lu),l=f.useMemo(()=>new De(s.current,t,n,i),[]),u=f.useRef(0);return f.useMemo(()=>{u.current+=1,l.update(t)},[...Object.values(t),o.nodes.open]),f.useImperativeHandle(e,()=>l),f.useEffect(()=>{l.props.selection?l.select(l.props.selection,{focus:!1}):l.deselectAll()},[l.props.selection]),f.useEffect(()=>{l.props.searchTerm||s.current.dispatch(pt.clear(!0))},[l.props.searchTerm]),a.jsx(Yr.Provider,{value:l,children:a.jsx(Zr.Provider,{value:u.current,children:a.jsx(Xr.Provider,{value:o.nodes,children:a.jsx(Qr.Provider,{value:o.dnd,children:a.jsx(wa,Object.assign({backend:Iu,options:{rootElement:l.props.dndRootElement||void 0}},t.dndManager&&{manager:t.dndManager},{children:r}))})})})})}function Fu(){const t=H(),[,e]=Cn(()=>({accept:"NODE",canDrop:(r,n)=>n.isOver({shallow:!0})?t.canDrop():!1,hover:(r,n)=>{if(!n.isOver({shallow:!0}))return;const i=n.getClientOffset();if(!t.listEl.current||!i)return;const{cursor:s,drop:o}=An({element:t.listEl.current,offset:i,indent:t.indent,node:null,prevNode:t.visibleNodes[t.visibleNodes.length-1],nextNode:null});o&&t.dispatch(ve.hovering(o.parentId,o.index)),n.canDrop()?s&&t.showCursor(s):t.hideCursor()}}),[t]);e(t.listEl)}function Hu(t){return Fu(),t.children}function zu(){const e=H().props.renderContainer||Mn;return a.jsx(a.Fragment,{children:a.jsx(e,{})})}function Bu(){const t=H(),{offset:e,mouse:r,item:n,isDragging:i}=Xl(o=>({offset:o.getSourceClientOffset(),mouse:o.getClientOffset(),item:o.getItem(),isDragging:o.isDragging()})),s=t.props.renderDragPreview||gn;return a.jsx(s,{offset:e,mouse:r,id:n?.id||null,dragIds:n?.dragIds||[],isDragging:i})}class Uu{constructor(e){this.root=qu(e)}get data(){var e,r;return(r=(e=this.root.children)===null||e===void 0?void 0:e.map(n=>n.data))!==null&&r!==void 0?r:[]}create(e){const r=e.parentId?this.find(e.parentId):this.root;if(!r)return null;r.addChild(e.data,e.index)}move(e){const r=this.find(e.id),n=e.parentId?this.find(e.parentId):this.root;!r||!n||(n.addChild(r.data,e.index),r.drop())}update(e){const r=this.find(e.id);r&&r.update(e.changes)}drop(e){const r=this.find(e.id);r&&r.drop()}find(e,r=this.root){if(!r)return null;if(r.id===e)return r;if(r.children){for(let n of r.children){const i=this.find(e,n);if(i)return i}return null}return null}}function qu(t){const e=new $n({id:"ROOT"},null);return e.children=t.map(r=>Pt(r,e)),e}function Pt(t,e){const r=new $n(t,e);return t.children&&(r.children=t.children.map(n=>Pt(n,r))),r}class $n{constructor(e,r){this.data=e,this.parent=r,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,r){var n,i;const s=Pt(e,this);this.children=(n=this.children)!==null&&n!==void 0?n:[],this.children.splice(r,0,s),this.data.children=(i=this.data.children)!==null&&i!==void 0?i:[],this.data.children.splice(r,0,e)}removeChild(e){var r,n;(r=this.children)===null||r===void 0||r.splice(e,1),(n=this.data.children)===null||n===void 0||n.splice(e,1)}update(e){if(this.hasParent()){const r=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),r),this.drop()}}drop(){this.hasParent()&&this.parent.removeChild(this.childIndex)}}let Vu=0;function Ku(t){const[e,r]=f.useState(t),n=f.useMemo(()=>new Uu(e),[e]);return[e,{onMove:c=>{for(const h of c.dragIds)n.move({id:h,parentId:c.parentId,index:c.index});r(n.data)},onRename:({name:c,id:h})=>{n.update({id:h,changes:{name:c}}),r(n.data)},onCreate:({parentId:c,index:h,type:y})=>{const w={id:`simple-tree-id-${Vu++}`,name:""};return y==="internal"&&(w.children=[]),n.create({parentId:c,index:h,data:w}),r(n.data),w},onDelete:c=>{c.ids.forEach(h=>n.drop({id:h})),r(n.data)}}]}function Wu(t){if(t.initialData&&t.data)throw new Error("React Arborist Tree => Provide either a data or initialData prop, but not both.");if(t.initialData&&(t.onCreate||t.onDelete||t.onMove||t.onRename))throw new Error(`React Arborist Tree => You passed the initialData prop along with a data handler.
Use the data prop if you want to provide your own handlers.`);if(t.initialData){const[e,r]=Ku(t.initialData);return Object.assign(Object.assign(Object.assign({},t),r),{data:e})}else return t}function Gu(t,e){const r=Wu(t);return a.jsxs($u,{treeProps:r,imperativeHandle:e,children:[a.jsx(Hu,{children:a.jsx(zu,{})}),a.jsx(Bu,{})]})}const Yu=f.forwardRef(Gu);function Xu({node:t,style:e,dragHandle:r}){const n=t.data.is_folder,i=t.isSelected;return a.jsxs("div",{style:e,className:Q("hover:bg-accent group flex items-center gap-1 rounded px-2 py-1 text-sm transition-colors",i&&"bg-accent text-accent-foreground"),onClick:()=>{n||t.select()},children:[a.jsx("div",{ref:r,className:"hover:bg-accent-foreground/10 flex h-4 w-4 shrink-0 cursor-grab items-center justify-center rounded opacity-0 transition-opacity group-hover:opacity-100 active:cursor-grabbing",children:a.jsx(Pi,{className:"h-3 w-3"})}),n&&a.jsx("button",{onClick:s=>{s.stopPropagation(),t.toggle()},className:"hover:bg-accent-foreground/10 flex h-4 w-4 shrink-0 items-center justify-center rounded","aria-label":t.isOpen?"Collapse folder":"Expand folder",children:t.isOpen?a.jsx(Vn,{className:"h-3 w-3"}):a.jsx(Kn,{className:"h-3 w-3"})}),!n&&a.jsx("div",{className:"h-4 w-4 shrink-0"}),n?a.jsx(ji,{className:"text-muted-foreground h-4 w-4 shrink-0"}):a.jsx(It,{className:"text-muted-foreground h-4 w-4 shrink-0"}),a.jsx("span",{className:"truncate",children:t.data.title})]})}function Qu({tree:t,selectedDocumentId:e,onSelectDocument:r,onMove:n}){const i=f.useRef(null),s=l=>{n&&l.dragIds.length>0&&n(l.dragIds[0],l.parentId,l.index)},o=l=>{l.length>0&&!l[0].data.is_folder&&r(l[0].data)};return t.length===0?a.jsx("div",{className:"text-muted-foreground flex items-center justify-center p-8 text-sm",children:"No documents found"}):a.jsx(Yu,{ref:i,data:t,openByDefault:!1,width:"100%",height:600,indent:12,rowHeight:32,overscanCount:8,padding:8,selection:e||void 0,onSelect:o,onMove:s,disableDrag:()=>!1,disableDrop:l=>{const u=l.dragNodes[0],c=l.parentNode;return!c||!c.data.is_folder||u.data.id===c.data.id},children:Xu})}var gt,Vr;function Zu(){return Vr||(Vr=1,gt=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],r.get(i[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(e[i]!==r[i])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}),gt}var Ju=Zu();const ec=Kr(Ju);var tc=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},rc=({contentComponent:t})=>{const e=wt.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return a.jsx(a.Fragment,{children:Object.values(e)})};function nc(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Yn.createPortal(n.reactElement,n.element,r)},t.forEach(i=>i())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(i=>i())}}}var ic=class extends J.Component{constructor(t){var e;super(t),this.editorContentRef=J.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=nc(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const r=document.createElement("div");r.append(e.view.dom),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:tc(e,this.editorContentRef),...r}),t?.contentComponent&&a.jsx(rc,{contentComponent:t.contentComponent})]})}},sc=f.forwardRef((t,e)=>{const r=J.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return J.createElement(ic,{key:r,innerRef:e,...t})}),oc=J.memo(sc),ac=typeof window<"u"?f.useLayoutEffect:f.useEffect,lc=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function uc(t){var e;const[r]=f.useState(()=>new lc(t.editor)),n=Gn.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:ec);return ac(()=>r.watch(t.editor),[t.editor,r]),f.useDebugValue(n),n}var cc=!1,Ot=typeof window>"u",dc=Ot||!!(typeof window<"u"&&window.next),fc=class Fn{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Ot||dc?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...n)},onBlur:(...n)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...n)},onCreate:(...n)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...n)},onDestroy:(...n)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...n)},onFocus:(...n)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...n)},onSelectionUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...n)},onTransaction:(...n)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...n)},onUpdate:(...n)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...n)},onContentError:(...n)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...n)},onDrop:(...n)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...n)},onPaste:(...n)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...n)},onDelete:(...n)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...n)}};return new Wn(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=r.extensions)==null?void 0:o[s])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Fn.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,i)=>n===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function hc(t={},e=[]){const r=f.useRef(t);r.current=t;const[n]=f.useState(()=>new fc(r)),i=wt.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return f.useDebugValue(i),f.useEffect(n.onRender(e)),uc({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var gc=f.createContext({editor:null});gc.Consumer;var pc=f.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),vc=()=>f.useContext(pc);J.forwardRef((t,e)=>{const{onDragStart:r}=vc(),n=t.as||"div";return a.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});J.createContext({markViewContentRef:()=>{}});function mc({editor:t}){return t?a.jsxs("div",{className:"border-border bg-background/95 sticky top-0 z-10 flex flex-wrap items-center gap-1 border-b p-2 backdrop-blur",children:[a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleBold().run(),disabled:!t.can().chain().focus().toggleBold().run(),className:Q(t.isActive("bold")&&"bg-accent"),"aria-label":"Bold",children:a.jsx(Di,{className:"h-4 w-4"})}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleItalic().run(),disabled:!t.can().chain().focus().toggleItalic().run(),className:Q(t.isActive("italic")&&"bg-accent"),"aria-label":"Italic",children:a.jsx(Ai,{className:"h-4 w-4"})}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleCode().run(),disabled:!t.can().chain().focus().toggleCode().run(),className:Q(t.isActive("code")&&"bg-accent"),"aria-label":"Inline code",children:a.jsx(Xt,{className:"h-4 w-4"})}),a.jsx("div",{className:"border-border mx-1 h-6 w-px border-l"}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleBulletList().run(),className:Q(t.isActive("bulletList")&&"bg-accent"),"aria-label":"Bullet list",children:a.jsx(Fi,{className:"h-4 w-4"})}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleOrderedList().run(),className:Q(t.isActive("orderedList")&&"bg-accent"),"aria-label":"Numbered list",children:a.jsx(Li,{className:"h-4 w-4"})}),a.jsx("div",{className:"border-border mx-1 h-6 w-px border-l"}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleCodeBlock().run(),className:Q(t.isActive("codeBlock")&&"bg-accent"),"aria-label":"Code block",children:a.jsx(Xt,{className:"h-4 w-4"})}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().toggleBlockquote().run(),className:Q(t.isActive("blockquote")&&"bg-accent"),"aria-label":"Quote",children:a.jsx(zi,{className:"h-4 w-4"})}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().insertTable({rows:3,cols:3}).run(),"aria-label":"Insert table",children:a.jsx(Wi,{className:"h-4 w-4"})}),a.jsx("div",{className:"border-border mx-1 h-6 w-px border-l"}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().chain().focus().undo().run(),"aria-label":"Undo",children:a.jsx(Qi,{className:"h-4 w-4"})}),a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().chain().focus().redo().run(),"aria-label":"Redo",children:a.jsx(Ui,{className:"h-4 w-4"})})]}):null}function yc({content:t,onUpdate:e,placeholder:r="Start writing...",editable:n=!0,className:i}){const s=f.useRef(null),[o,l]=f.useState(null),u=f.useCallback(h=>{try{const y=h.getMarkdown();s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{e(y)},2e3)}catch(y){console.error("Error getting markdown:",y)}},[e]),c=hc({extensions:[Xn.configure({codeBlock:{HTMLAttributes:{class:"bg-muted rounded p-4 font-mono text-sm"}},code:{HTMLAttributes:{class:"bg-muted rounded px-1.5 py-0.5 font-mono text-sm"}},blockquote:{HTMLAttributes:{class:"border-l-4 border-border pl-4 italic"}}}),Qn,Zn.configure({resizable:!0,HTMLAttributes:{class:"border-collapse table-auto w-full border border-border"}}),Jn.configure({HTMLAttributes:{class:"border-b border-border"}}),ei.configure({HTMLAttributes:{class:"border border-border p-2"}}),ti.configure({HTMLAttributes:{class:"border border-border bg-muted p-2 font-semibold"}}),ri.configure({placeholder:r}),ni,ii],content:"",editable:n,onUpdate:({editor:h})=>u(h),editorProps:{attributes:{class:Q("prose prose-sm dark:prose-invert max-w-none","focus:outline-none min-h-[200px] p-4","leading-normal [&_p]:leading-normal [&_li]:leading-normal","[&_table]:my-2 [&_td]:py-0 [&_td]:px-2 [&_th]:py-0 [&_th]:px-2",i)}}});return f.useEffect(()=>{if(c&&t)try{const h=c.getMarkdown();t!==h&&(c.commands.setContent(t,{contentType:"markdown"}),l(null))}catch(h){console.error("Error setting markdown content:",h),l("Unable to parse markdown. Showing as plain text.");try{c.commands.setContent({type:"doc",content:[{type:"codeBlock",content:[{type:"text",text:t}]}]})}catch(y){console.error("Error setting fallback content:",y)}}},[t,c]),f.useEffect(()=>{c&&c.setEditable(n)},[n,c]),f.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),c?a.jsxs("div",{className:"border-border flex flex-col rounded-lg border",children:[o&&a.jsxs("div",{className:"bg-destructive/10 text-destructive border-destructive/20 flex items-start gap-2 border-b p-3 text-sm",children:[a.jsx(Wr,{className:"mt-0.5 h-4 w-4 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Markdown Parsing Error"}),a.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:o})]})]}),n&&a.jsx(mc,{editor:c}),a.jsx(oc,{editor:c})]}):null}function bc({document:t,isLoading:e=!1,isPublishing:r=!1,saveStatus:n="idle",onContentUpdate:i,onTogglePublish:s,onDelete:o}){if(e)return a.jsxs("div",{className:"flex h-full flex-col gap-4 p-6",children:[a.jsx(Z,{className:"h-8 w-64"}),a.jsx(Z,{className:"h-6 w-32"}),a.jsx(Z,{className:"mt-4 h-96 w-full"})]});if(!t)return a.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3 p-6 text-center",children:[a.jsx(It,{className:"text-muted-foreground h-16 w-16"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-foreground mb-1 text-lg font-semibold",children:"No document selected"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a document from the sidebar to view its content"})]})]});const l=()=>{switch(n){case"saving":return"Saving...";case"saved":return"Saved";case"error":return"Error saving";default:return""}};return a.jsxs("div",{className:"flex h-full flex-col overflow-y-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"mb-2 flex items-start justify-between gap-4",children:[a.jsx("h1",{className:"text-foreground text-2xl font-bold",children:t.title}),a.jsxs("div",{className:"flex items-center gap-3",children:[n!=="idle"&&a.jsxs("div",{className:"text-muted-foreground flex items-center gap-1.5 text-sm",children:[n==="saving"&&a.jsx(si,{className:"h-4 w-4 animate-spin"}),n==="saved"&&a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:l()})]}),s&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{htmlFor:"publish-toggle",className:"cursor-pointer text-sm font-medium",children:"Published"}),a.jsx(oi,{id:"publish-toggle",checked:t.status==="published",disabled:r,onCheckedChange:()=>s(t,t.status)})]}),o&&a.jsx(A,{variant:"ghost",size:"icon-sm",onClick:()=>o(t),"aria-label":"Delete document",className:"text-muted-foreground hover:text-destructive",children:a.jsx(ai,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"text-muted-foreground flex flex-wrap items-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(wi,{className:"h-4 w-4"}),a.jsxs("span",{children:["Updated"," ",yi(new Date(t.updated_at),{addSuffix:!0})]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ei,{className:"h-4 w-4"}),a.jsx("span",{className:"capitalize",children:t.category.replace("-"," ")})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Yi,{className:"h-4 w-4"}),a.jsx("span",{className:"capitalize",children:t.priority})]})]}),t.tags&&t.tags.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.tags.map((u,c)=>a.jsx(ge,{variant:"outline",children:u},c))})]}),a.jsx(ke,{className:"flex-1",children:a.jsx(Qe,{className:"pt-6",children:a.jsx(yc,{content:Gr(t.content),onUpdate:u=>{if(i){const c=bi(t.content),h=c?Si(u,c):u;i(h)}},editable:t.status==="draft",placeholder:"Start writing your knowledge base document..."})})}),t.applies_to&&t.applies_to.length>0&&a.jsxs(ke,{className:"mt-4",children:[a.jsx(At,{children:a.jsx(Mt,{className:"text-base",children:"Applies To"})}),a.jsx(Qe,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:t.applies_to.map((u,c)=>a.jsx(ge,{variant:"secondary",children:u},c))})})]}),t.context_triggers&&t.context_triggers.length>0&&a.jsxs(ke,{className:"mt-4",children:[a.jsx(At,{children:a.jsx(Mt,{className:"text-base",children:"Context Triggers"})}),a.jsx(Qe,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:t.context_triggers.map((u,c)=>a.jsx(ge,{variant:"secondary",children:u},c))})})]})]})}const Sc=[{value:"brand",label:"Brand"},{value:"channels",label:"Channels"},{value:"performance",label:"Performance"},{value:"client-management",label:"Client Management"}],xc=[{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}];function Dc({document:t,parentId:e,isFolder:r=!1,onSubmit:n,onCancel:i,isSubmitting:s=!1}){const[o,l]=f.useState(t?.title||""),[u,c]=f.useState(t?.content||""),[h,y]=f.useState(t?.category||"brand"),[w,C]=f.useState(t?.priority||"medium"),[x,d]=f.useState(t?.tags||[]),[g,v]=f.useState(""),[m,S]=f.useState(t?.applies_to||[]),[T,I]=f.useState(""),[D,N]=f.useState(t?.context_triggers||[]),[j,P]=f.useState(""),G=()=>{g.trim()&&!x.includes(g.trim())&&(d([...x,g.trim()]),v(""))},z=b=>{d(x.filter(F=>F!==b))},ae=()=>{T.trim()&&!m.includes(T.trim())&&(S([...m,T.trim()]),I(""))},le=b=>{S(m.filter(F=>F!==b))},ee=()=>{j.trim()&&!D.includes(j.trim())&&(N([...D,j.trim()]),P(""))},me=b=>{N(D.filter(F=>F!==b))},ye=b=>{b.preventDefault();const F={title:o.trim(),content:u.trim(),category:h,priority:w,tags:x.length>0?x:[],applies_to:m.length>0?m:[],context_triggers:D.length>0?D:[],parent_id:e||t?.parent_id||null,is_folder:r};n(F)};return a.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(te,{htmlFor:"title",children:[r?"Folder Name":"Document Title"," ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(Te,{id:"title",value:o,onChange:b=>l(b.target.value),placeholder:r?"Enter folder name":"Enter document title",required:!0,autoFocus:!0})]}),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(te,{htmlFor:"content",children:["Content ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsx(li,{id:"content",value:u,onChange:b=>c(b.target.value),placeholder:"Enter document content (supports Markdown)",className:"min-h-[200px] resize-y",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(te,{htmlFor:"category",children:["Category ",a.jsx("span",{className:"text-destructive",children:"*"})]}),a.jsxs(Lt,{value:h,onValueChange:b=>y(b),children:[a.jsx($t,{id:"category",children:a.jsx(Ft,{})}),a.jsx(Ht,{children:Sc.map(b=>a.jsx(zt,{value:b.value,children:b.label},b.value))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(te,{htmlFor:"priority",children:"Priority"}),a.jsxs(Lt,{value:w,onValueChange:b=>C(b),children:[a.jsx($t,{id:"priority",children:a.jsx(Ft,{})}),a.jsx(Ht,{children:xc.map(b=>a.jsx(zt,{value:b.value,children:b.label},b.value))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(te,{htmlFor:"tags",children:"Tags"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Te,{id:"tags",value:g,onChange:b=>v(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),G())},placeholder:"Add a tag and press Enter"}),a.jsx(A,{type:"button",onClick:G,variant:"secondary",children:"Add"})]}),x.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:x.map(b=>a.jsxs(ge,{variant:"secondary",className:"flex items-center gap-1",children:[b,a.jsx("button",{type:"button",onClick:()=>z(b),className:"hover:bg-accent-foreground/10 rounded-sm",children:a.jsx(Ze,{className:"h-3 w-3"})})]},b))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(te,{htmlFor:"applies-to",children:"Applies To"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Te,{id:"applies-to",value:T,onChange:b=>I(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),ae())},placeholder:"Add item and press Enter"}),a.jsx(A,{type:"button",onClick:ae,variant:"secondary",children:"Add"})]}),m.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:m.map(b=>a.jsxs(ge,{variant:"outline",className:"flex items-center gap-1",children:[b,a.jsx("button",{type:"button",onClick:()=>le(b),className:"hover:bg-accent-foreground/10 rounded-sm",children:a.jsx(Ze,{className:"h-3 w-3"})})]},b))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(te,{htmlFor:"context-triggers",children:"Context Triggers"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Te,{id:"context-triggers",value:j,onChange:b=>P(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),ee())},placeholder:"Add trigger and press Enter"}),a.jsx(A,{type:"button",onClick:ee,variant:"secondary",children:"Add"})]}),D.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:D.map(b=>a.jsxs(ge,{variant:"outline",className:"flex items-center gap-1",children:[b,a.jsx("button",{type:"button",onClick:()=>me(b),className:"hover:bg-accent-foreground/10 rounded-sm",children:a.jsx(Ze,{className:"h-3 w-3"})})]},b))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(A,{type:"button",variant:"ghost",onClick:i,disabled:s,children:"Cancel"}),a.jsx(A,{type:"submit",disabled:s||!o.trim()||!r&&!u.trim(),children:s?"Saving...":t?"Update":"Create"})]})]})}function Ic(){const t=ui(p=>p.user),{tree:e,selectedDocument:r,isLoading:n,error:i,setTree:s,setSelectedDocument:o,setLoading:l,setError:u}=ci(),[c,h]=f.useState(null),[y,w]=f.useState(null),[C,x]=f.useState(!1),[d,g]=f.useState(!1),[v,m]=f.useState(!1),[S,T]=f.useState(null),[I,D]=f.useState("idle"),[N,j]=f.useState(!1),[P,G]=f.useState(null);f.useEffect(()=>{let p=!0;async function E(){if(t?.user_id){l(!0),u(null);try{const k=await Zt({includeDrafts:!0});p&&s(k.tree)}catch(k){if(!p)return;const B=k instanceof Error?k.message:"Failed to load knowledge base";u(B),$.error("Failed to load knowledge base",{description:B})}finally{p&&l(!1)}}}return E(),()=>{p=!1}},[t?.user_id,s,l,u]);const z=async()=>{if(t?.user_id)try{const p=await Zt({includeDrafts:!0});s(p.tree)}catch(p){console.error("Failed to reload tree:",p)}},ae=async p=>{if(!p.is_folder)try{const E=await Ce(p.id);o(E)}catch(E){const k=E instanceof Error?E.message:"Failed to load document";$.error("Failed to load document",{description:k})}},le=p=>{w(null),h(p)},ee=()=>{h(null),w(null)},me=async p=>{if(t?.user_id){x(!0);try{if(c==="edit"&&y){await Je(y.id,{updated_by_user_id:t.user_id,title:p.title,content:p.content,category:p.category,priority:p.priority,tags:p.tags.length>0?p.tags:void 0,applies_to:p.applies_to.length>0?p.applies_to:void 0,context_triggers:p.context_triggers.length>0?p.context_triggers:void 0}),$.success("Document updated successfully");const E=await Ce(y.id);o(E)}else{const E=await Zi({created_by_user_id:t.user_id,title:p.title,content:p.content,category:p.category,priority:p.priority,tags:p.tags.length>0?p.tags:void 0,applies_to:p.applies_to.length>0?p.applies_to:void 0,context_triggers:p.context_triggers.length>0?p.context_triggers:void 0,parent_id:p.parent_id||void 0,is_folder:p.is_folder,sort_order:0,status:"draft"});$.success(`${p.is_folder?"Folder":"Document"} created successfully`),p.is_folder||o(E)}await z(),ee()}catch(E){const k=E instanceof Error?E.message:`Failed to ${c==="edit"?"update":"create"} ${p.is_folder?"folder":"document"}`;$.error(c==="edit"?"Update failed":`${p.is_folder?"Folder":"Document"} creation failed`,{description:k})}finally{x(!1)}}},ye=async p=>{try{await Qt(p.id),$.success(`${p.is_folder?"Folder":"Document"} deleted successfully`),r?.id===p.id&&o(null),await z()}catch(E){const k=E instanceof Error?E.message:"Failed to delete";$.error("Delete failed",{description:k})}},b=(p,E)=>{if(!t?.user_id)return;T({document:p,newStatus:E==="published"?"draft":"published"}),m(!0)},F=async()=>{if(!S||!t?.user_id)return;const{document:p,newStatus:E}=S,k=p.status;try{g(!0),o({...p,status:E}),E==="published"?(await Ji(p.id,{updated_by_user_id:t.user_id}),$.success("Document published successfully")):(await es(p.id,{updated_by_user_id:t.user_id}),$.success("Document unpublished"));const B=await Ce(p.id);o(B),await z()}catch(B){o({...p,status:k});const Xe=B instanceof Error?B.message:`Failed to ${E==="published"?"publish":"unpublish"}`;$.error(E==="published"?"Publish failed":"Unpublish failed",{description:Xe})}finally{g(!1),m(!1),T(null)}},We=async(p,E,k)=>{if(t?.user_id)try{if(await Je(p,{updated_by_user_id:t.user_id,parent_id:E||null,sort_order:k}),await z(),r?.id===p){const B=await Ce(p);o(B)}$.success("Document moved successfully")}catch(B){const Xe=B instanceof Error?B.message:"Failed to move document";$.error("Move failed",{description:Xe})}},Ie=async p=>{if(!(!r||!t?.user_id||r.status!=="draft")){D("saving");try{await Je(r.id,{updated_by_user_id:t.user_id,content:p}),o({...r,content:p}),D("saved"),setTimeout(()=>{D("idle")},2e3)}catch(E){D("error");const k=E instanceof Error?E.message:"Failed to save changes";$.error("Auto-save failed",{description:k}),setTimeout(()=>{D("idle")},3e3)}}},Ge=p=>{G(p),j(!0)},Ye=async()=>{if(P)try{await Qt(P.id),$.success("Document deleted successfully"),o(null),j(!1),G(null),await z()}catch(p){const E=p instanceof Error?p.message:"Failed to delete document";$.error("Delete failed",{description:E})}};return n&&e.length===0?a.jsxs("div",{className:"flex h-full gap-4 p-6",children:[a.jsx("div",{className:"w-80 shrink-0",children:a.jsxs(ke,{className:"h-full p-4",children:[a.jsx(Z,{className:"mb-4 h-6 w-32"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Z,{className:"h-8 w-full"}),a.jsx(Z,{className:"h-8 w-full"}),a.jsx(Z,{className:"h-8 w-full"}),a.jsx(Z,{className:"h-8 w-full"})]})]})}),a.jsx("div",{className:"flex-1",children:a.jsx(Z,{className:"h-full w-full"})})]}):i&&e.length===0?a.jsx("div",{className:"flex h-full items-center justify-center p-6",children:a.jsxs(di,{variant:"destructive",className:"max-w-md",children:[a.jsx(Wr,{className:"h-4 w-4"}),a.jsx(fi,{children:i})]})}):a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsx("div",{className:"border-border w-80 shrink-0 border-r",children:a.jsxs("div",{className:"flex h-full flex-col",children:[a.jsx("div",{className:"border-border bg-background border-b p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(A,{variant:"outline",size:"sm",onClick:()=>le("create-document"),className:"flex-1",children:[a.jsx(It,{className:"mr-1.5 h-4 w-4"}),"New Doc"]}),a.jsxs(A,{variant:"outline",size:"sm",onClick:()=>le("create-folder"),className:"flex-1",children:[a.jsx(Ci,{className:"mr-1.5 h-4 w-4"}),"New Folder"]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:a.jsx(Qu,{tree:e,selectedDocumentId:r?.id||null,onSelectDocument:ae,onDelete:ye,onMove:We})})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(bc,{document:r,isLoading:!1,isPublishing:d,saveStatus:I,onContentUpdate:Ie,onTogglePublish:b,onDelete:Ge})}),a.jsx(Bt,{open:v,onOpenChange:m,children:a.jsxs(Ut,{children:[a.jsxs(qt,{children:[a.jsx(Vt,{children:S?.newStatus==="published"?"Publish Document":"Unpublish Document"}),a.jsx(Kt,{children:S?.newStatus==="published"?"Publishing this document will make it visible in the Knowledge Base and sync it to AWS for retrieval. This action can be reversed.":"Unpublishing this document will remove it from the Knowledge Base and AWS index. It will return to draft status."})]}),a.jsxs(Wt,{children:[a.jsx(Gt,{disabled:d,children:"Cancel"}),a.jsx(Yt,{onClick:F,disabled:d,children:d?"Processing...":S?.newStatus==="published"?"Publish":"Unpublish"})]})]})}),a.jsx(Bt,{open:N,onOpenChange:j,children:a.jsxs(Ut,{children:[a.jsxs(qt,{children:[a.jsx(Vt,{children:"Delete Document"}),a.jsxs(Kt,{children:['Are you sure you want to delete "',P?.title,'"? This action cannot be undone.']})]}),a.jsxs(Wt,{children:[a.jsx(Gt,{children:"Cancel"}),a.jsx(Yt,{onClick:Ye,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),a.jsx(hi,{open:c!==null,onOpenChange:p=>!p&&ee(),children:a.jsxs(gi,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[a.jsxs(pi,{children:[a.jsx(vi,{children:c==="edit"?"Edit Document":c==="create-folder"?"Create New Folder":"Create New Document"}),a.jsx(mi,{children:c==="edit"?"Update the document details below.":c==="create-folder"?"Create a new folder to organize your documents.":"Create a new knowledge base document."})]}),a.jsx(Dc,{document:y,isFolder:c==="create-folder",onSubmit:me,onCancel:ee,isSubmitting:C})]})})]})}export{Ic as KnowledgeBasePage,Ic as default};
